<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>405 - Method Not Allowed</title>
    <link rel="stylesheet" href="/static/css/error-pages.css">
</head>
<body class="error-405">
    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <line x1="12" y1="1" x2="12" y2="3"/>
            <line x1="12" y1="21" x2="12" y2="23"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
            <line x1="1" y1="12" x2="3" y2="12"/>
            <line x1="21" y1="12" x2="23" y2="12"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <svg class="moon-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
    </button>
    <div class="error-container">
        <div class="error-icon warning">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="currentColor"/>
                <line x1="4" y1="4" x2="20" y2="20" stroke="currentColor" stroke-width="2"/>
            </svg>
        </div>
        
        <div class="error-code">405</div>
        
        <h1 class="error-title">Method Not Allowed</h1>
        
        <p class="error-message">
            {% if error_message %}
                {{ error_message }}
            {% else %}
                The HTTP method <strong>{{ request_method }}</strong> is not allowed for this endpoint.
            {% endif %}
        </p>
        
        {% if allowed_methods %}
        <div class="error-details">
            <strong>Allowed methods:</strong> {{ allowed_methods }}
        </div>
        {% endif %}
        
        <div class="error-actions">
            <a href="/" class="btn btn-primary">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 0L0 8l1.5 1.5L8 3l6.5 6.5L16 8z"/>
                </svg>
                Go to Home
            </a>
            <a href="/docs" class="btn btn-secondary">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0114.25 14H1.75A1.75 1.75 0 010 12.25v-8.5z"/>
                </svg>
                API Documentation
            </a>
        </div>
        
        {% if request_id %}
        <div class="error-meta">
            <span class="error-meta-item">Request ID: {{ request_id }}</span>
        </div>
        {% endif %}
    </div>
    
    <div class="error-footer">
        Need help? <a href="/docs">Check API documentation</a>
    </div>
    
    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
            } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
        })();
    </script>
</body>
</html>
