/* EDA Interface - Comprehensive Light & Dark Mode Theming */

/* ======= CSS VARIABLES FOR CONSISTENT THEMING ======= */

/* Light Mode Variables (Default) */
:root {
    /* Background Colors */
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --bg-tertiary: #e9ecef;
    --bg-accent: #f0f4f8;
    
    /* Text Colors */
    --text-primary: #2d3748;
    --text-secondary: #718096;
    --text-muted: #a0aec0;
    --text-inverse: #ffffff;
    
    /* Border Colors */
    --border-color: #e2e8f0;
    --border-light: #f1f3f5;
    --divider-color: #dee2e6;
    
    /* Primary Brand Colors */
    --primary-color: #4299e1;
    --primary-rgb: 66, 153, 225;
    --primary-hover: #3182ce;
    
    /* Status Colors */
    --success-color: #48bb78;
    --success-rgb: 72, 187, 120;
    --warning-color: #ed8936;
    --warning-rgb: 237, 137, 54;
    --danger-color: #f56565;
    --danger-rgb: 245, 101, 101;
    --info-color: #4299e1;
    --info-rgb: 66, 153, 225;
    
    /* State Colors */
    --status-ready: #48bb78;
    --status-processing: #ed8936;
    --status-error: #f56565;
    
    /* Gradients */
    --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    --hero-gradient: linear-gradient(135deg, #4299e1 0%, #8b5cf6 50%, #10b981 100%);
    --domain-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --features-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    --export-gradient: linear-gradient(135deg, #f59e0b 0%, #ec4899 50%, #8b5cf6 100%);
    --help-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    --info-gradient: linear-gradient(135deg, #4299e1 0%, #63b3ed 100%);
    --warning-gradient: linear-gradient(135deg, #ed8936 0%, #fbb954 100%);
    
    /* Button Specific Gradients */
    --btn-eda-gradient: linear-gradient(135deg, #4299e1 0%, #8b5cf6 50%, #10b981 100%);
    --btn-eda-hover-gradient: linear-gradient(135deg, #3182ce 0%, #7c3aed 50%, #059669 100%);
    
    /* Background Gradients */
    --page-gradient: linear-gradient(180deg, #f0f4f8 0%, #d9e2ec 100%);
    --card-gradient: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
    
    /* Shadows */
    --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
    --shadow-xl: 0 20px 40px rgba(0,0,0,0.15);
    --shadow-2xl: 0 25px 50px rgba(0,0,0,0.25);
    
    /* Interactive States */
    --hover-bg: rgba(66, 153, 225, 0.1);
    --focus-ring: 0 0 0 3px rgba(66, 153, 225, 0.1);
    
    /* Code Editor Colors */
    --code-bg: #f8f9fa;
    --code-text: #2d3748;
    --code-border: #e2e8f0;
    --code-output-bg: #ffffff;
    --code-output-text: #2d3748;
    
    /* Card & Component Colors */
    --card-background: #ffffff;
    --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --border-radius: 12px;
    
    /* Bootstrap Compatible Colors */
    --bs-primary: #4299e1;
    --bs-success: #48bb78;
    --bs-warning: #ed8936;
    --bs-danger: #f56565;
    --bs-info: #4299e1;
    --bs-secondary: #6c757d;
}

/* Dark Mode Variables */
body.dark-mode {
    /* Background Colors */
    --bg-primary: #242a34;
    --bg-secondary: #2e3440;
    --bg-tertiary: #383e4c;
    --bg-accent: #2e3440;
    
    /* Elevation Surfaces */
    --surface-soft: #272d37;
    --surface-soft-rgb: 39, 45, 55;
    --surface-base: #2f3540;
    --surface-base-rgb: 47, 53, 64;
    --surface-elevated: #363c49;
    --surface-elevated-rgb: 54, 60, 73;
    --surface-highlight: #3c4251;
    --surface-highlight-rgb: 60, 66, 81;
    
    /* Text Colors */
    --text-primary: #f7fafc;
    --text-secondary: #a0aec0;
    --text-muted: #8a98ad;
    --text-inverse: #0f141c;
    
    /* Border Colors */
    --border-color: #404654;
    --border-light: #313744;
    --divider-color: #454b59;
    
    /* Primary Brand Colors */
    --primary-color: #63b3ed;
    --primary-rgb: 99, 179, 237;
    --primary-hover: #4299e1;
    
    /* Status Colors */
    --success-color: #68d391;
    --success-rgb: 104, 211, 145;
    --warning-color: #fbb954;
    --warning-rgb: 251, 185, 84;
    --danger-color: #fc8181;
    --danger-rgb: 252, 129, 129;
    --info-color: #63b3ed;
    --info-rgb: 99, 179, 237;
    
    /* Shadows (darker for dark mode) */
    --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
    --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.18);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.18);
    --shadow-lg: 0 10px 25px rgba(0,0,0,0.4);
    --shadow-xl: 0 20px 40px rgba(0,0,0,0.5);
    --shadow-2xl: 0 25px 50px rgba(0,0,0,0.6);
    
    /* Interactive States */
    --hover-bg: rgba(99, 179, 237, 0.12);
    --focus-ring: 0 0 0 3px rgba(99, 179, 237, 0.12);
    
    /* Code Editor Colors */
    --code-bg: #1a202c;
    --code-text: #e2e8f0;
    --code-border: #4a5568;
    --code-output-bg: #2d3748;
    --code-output-text: #e2e8f0;
    
    /* Card & Component Colors */
    --card-background: var(--surface-base);
    --card-shadow: 0 4px 12px rgba(15, 20, 30, 0.28);
    
    /* Dark Mode Gradients */
    --hero-gradient: linear-gradient(135deg, #63b3ed 0%, #9f7aea 50%, #10b981 100%);
    --btn-eda-gradient: linear-gradient(135deg, #63b3ed 0%, #9f7aea 50%, #10b981 100%);
    --btn-eda-hover-gradient: linear-gradient(135deg, #4299e1 0%, #8b5cf6 50%, #059669 100%);
    --page-gradient: linear-gradient(180deg, #1a202c 0%, #2d3748 100%);
    --card-gradient: linear-gradient(145deg, #2d3748 0%, #1a202c 100%);
    
    /* Bootstrap Compatible Colors */
    --bs-primary: #63b3ed;
    --bs-success: #68d391;
    --bs-warning: #fbb954;
    --bs-danger: #fc8181;
    --bs-info: #63b3ed;
    --bs-secondary: #a0aec0;
}


/* ======= BASE STYLES ======= */

/* Base body styles to match data_preview and data_ingestion */
body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--page-gradient);
    min-height: 100vh;
    color: var(--text-primary);
    line-height: 1.6;
}

/* Smooth theme transitions */
* {
    transition: background-color 0.25s ease, color 0.25s ease, border-color 0.25s ease, box-shadow 0.25s ease;
}

/* Theme transition class for optimized switching */
.theme-transition,
.theme-transition * {
    transition: background-color 180ms ease, color 180ms ease, border-color 180ms ease !important;
}


/* ======= NAVIGATION & HEADERS ======= */



/* ======= CARDS & CONTAINERS ======= */


/* ======= ENHANCED ANALYSIS COMPONENTS - GRID LAYOUT ======= */

/* Analysis Layout Container */
.analysis-layout-container {
    position: relative;
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    gap: 1.25rem;
    transition: all 0.4s ease;
}

/* Analysis Cards Grid */
.analysis-cards-grid {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 0.75rem;
    width: 100%;
    transition: all 0.4s ease;
    max-width: none;
}

.analysis-catalogue-loading {
    grid-column: 1 / -1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    border: 1px dashed var(--border-color);
    border-radius: 0.75rem;
    background: var(--bg-secondary);
    color: var(--text-secondary);
    font-size: 0.85rem;
}

body.dark-mode .analysis-catalogue-loading {
    border-color: rgba(255, 255, 255, 0.18);
    background: rgba(255, 255, 255, 0.04);
    color: var(--text-primary);
}

/* Individual Analysis Category Card - Compact Design */
.analysis-category-card {
    background: var(--bg-primary);
    border: 2px solid var(--border-color);
    border-radius: 8px;
    padding: 0.75rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    min-height: 80px;
    max-height: 90px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.analysis-category-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
    transition: left 0.6s ease;
}

.analysis-category-card:hover::before {
    left: 100%;
}

.analysis-category-card:hover {
    transform: translateY(-2px) scale(1.02);
    border-color: var(--primary-color);
    box-shadow: var(--shadow-md);
}

.analysis-category-card.locked {
    cursor: not-allowed;
    opacity: 0.55;
    border-style: dashed;
    border-color: var(--border-color);
    box-shadow: none;
    transform: none;
}

.analysis-category-card.locked::before {
    display: none;
}

.analysis-category-card.locked:hover {
    transform: none;
    border-color: var(--border-color);
    box-shadow: none;
}

.analysis-category-card.selected {
    border-color: var(--success-color);
    background: linear-gradient(135deg, var(--success-color)15, var(--success-color)05);
    box-shadow: 0 6px 20px rgba(72, 187, 120, 0.2);
}

.analysis-category-card.selected::after {
    content: '\F26A'; /* Bootstrap check icon */
    font-family: 'bootstrap-icons';
    position: absolute;
    top: 8px;
    right: 8px;
    color: var(--success-color);
    font-size: 1rem;
    animation: checkmarkPulse 0.6s ease;
}

@keyframes checkmarkPulse {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}

/* Compact Card Header */
.category-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
}

.category-card-icon {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 0.5rem;
    background: var(--primary-gradient);
    color: white;
    font-size: 1rem;
    flex-shrink: 0;
}

.category-card-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
    line-height: 1.2;
}

.category-card-subtitle {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin: 0;
    opacity: 0.8;
    line-height: 1.2;
    margin-top: 0.25rem;
}

.category-card-meta {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    margin-left: 0.75rem;
}

.category-card-count {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.15rem 0.6rem;
    font-size: 0.6rem;
    font-weight: 600;
    color: var(--text-secondary);
    background: rgba(15, 23, 42, 0.06);
    border-radius: 999px;
    border: 1px solid var(--border-color);
    white-space: nowrap;
}

body.dark-mode .category-card-count {
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.16);
}

/* Hide card content in compact view */
.category-card-content {
    display: none;
}

.analysis-count {
    font-size: 0.8rem;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.analysis-count i {
    font-size: 0.75rem;
}

/* Quick Preview Options */
.category-preview-options {
    display: flex;
    flex-wrap: wrap;
    gap: 0.25rem;
    margin-top: 0.5rem;
}

.preview-option-tag {
    font-size: 0.7rem;
    padding: 0.15rem 0.4rem;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    color: var(--text-secondary);
    transition: all 0.2s ease;
}

.analysis-category-card:hover .preview-option-tag {
    border-color: var(--primary-color);
    color: var(--primary-color);
}

/* Selected Categories Sidebar - Right Side */
.selected-categories-sidebar {
    width: 300px;
    min-width: 300px;
    flex-shrink: 0;
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1.25rem;
    position: sticky;
    top: 1rem;
    max-height: calc(100vh - 8rem);
    overflow: hidden;
    display: none;
    flex-direction: column;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
}

.selected-categories-sidebar.is-active {
    display: flex;
}

.selected-categories-sidebar.is-empty {
    gap: 0.5rem;
}

.selected-categories-sidebar.is-empty .sidebar-header {
    align-items: flex-start;
}

.selected-categories-sidebar.is-empty .sidebar-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.sidebar-empty-state {
    display: inline-flex;
    align-items: center;
    gap: 0.65rem;
    padding: 0.45rem 0.65rem;
    border-radius: 999px;
    background: rgba(24, 39, 53, 0.06);
    color: var(--text-secondary);
    font-size: 0.85rem;
    line-height: 1.2;
}

.sidebar-empty-state i {
    font-size: 1rem;
    color: var(--primary-color);
}

.selected-categories-sidebar.is-empty #clearCategoriesBtn {
    pointer-events: none;
    opacity: 0.5;
}

@keyframes slideDownFade {
    from {
        transform: translateY(-12px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

body.dark-mode .selected-categories-sidebar {
    background: var(--card-bg);
    border-color: var(--border-color);
}

body.dark-mode .sidebar-empty-state {
    background: rgba(255, 255, 255, 0.08);
    color: rgba(255, 255, 255, 0.75);
}

.sidebar-header {
    padding: 0 0 1rem 0;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.75rem;
    flex-shrink: 0;
}

.sidebar-header h6 {
    margin: 0;
    color: var(--text-primary);
    flex: 1;
    font-size: 0.95rem;
    font-weight: 600;
}

.sidebar-content {
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    align-items: stretch;
    overflow-y: auto;
    flex: 1 1 auto;
    min-height: 0;
    margin-top: 1rem;
}

/* Selected Category in Sidebar */
.selected-category-item {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 0.7rem 0.9rem;
    margin: 0;
    position: relative;
    width: 100%;
    box-shadow: var(--shadow-xs);
    display: flex;
    flex-direction: column;
    max-height: clamp(180px, 34vh, 320px);
    overflow-y: auto;
    scrollbar-gutter: stable both-edges;
}

body.dark-mode .selected-category-item {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.12);
    box-shadow: none;
}

.selected-category-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    gap: 0.5rem;
}

.selected-category-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex: 1;
}

.expand-toggle {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 1rem;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.expand-toggle.expanded {
    transform: rotate(90deg);
}

/* Expandable Sub-Options */
.category-suboptions {
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid var(--divider-color);
    display: none;
}

.category-suboptions.expanded {
    display: block;
    animation: expandDown 0.3s ease;
}

@keyframes expandDown {
    from {
        opacity: 0;
        max-height: 0;
    }
    to {
        opacity: 1;
        max-height: 200px;
    }
}

.suboption-item {
    display: flex;
    align-items: center;
    padding: 0.425rem 0.55rem;
    margin: 0.2rem 0;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    font-size: 0.85rem;
    line-height: 1.25;
}

.suboption-item .suboption-label {
    font-weight: 500;
    color: var(--text-primary);
}

.suboption-meta {
    font-size: 0.7rem;
    letter-spacing: 0.01em;
}

.suboption-item:hover {
    border-color: var(--primary-color);
    background: var(--hover-bg);
}

.suboption-item.selected {
    border-color: var(--success-color);
    background: linear-gradient(135deg, var(--success-color)10, var(--success-color)05);
}

.suboption-item.selected::after {
    content: '\F26A';
    font-family: 'bootstrap-icons';
    position: absolute;
    right: 8px;
    color: var(--success-color);
    font-size: 0.9rem;
}

.suboption-item.is-running,
.sub-suboption-item.is-running {
    border-color: var(--primary-color);
    background: rgba(var(--primary-rgb, 66, 153, 225), 0.12);
    color: var(--primary-color);
    cursor: progress;
}

/* Hierarchical Suboption Groups */
.suboption-group {
    margin-bottom: 8px;
}

.suboption-group-header {
    display: flex;
    align-items: center;
    padding: 6px 10px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.82rem;
    line-height: 1.2;
}

.suboption-group-header:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
}

.suboption-group-header i:first-child {
    margin-right: 8px;
    color: var(--primary-color);
}

.suboption-group-header .expand-icon {
    margin-left: auto;
    transition: transform 0.2s ease;
    color: var(--text-secondary);
}

.suboption-group-header .expand-icon.expanded {
    transform: rotate(90deg);
}

/* Sub-suboptions container */
.sub-suboptions {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    margin-left: 20px;
    margin-top: 4px;
    border-left: 2px solid var(--border-color);
    padding-left: 12px;
}

.sub-suboptions.expanded {
    max-height: 300px; /* Adjust based on content */
}

/* Individual sub-suboption items */
.sub-suboption-item {
    display: flex;
    align-items: center;
    padding: 5px 9px;
    margin: 2px 0;
    background: var(--bg-primary);
    border: 1px solid var(--border-light);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.8rem;
    color: var(--text-secondary);
    position: relative;
    line-height: 1.2;
}

.sub-suboption-item:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
    color: var(--text-primary);
    transform: translateX(2px);
}

.sub-suboption-item i {
    margin-right: 8px;
    color: var(--primary-color);
    font-size: 0.85rem;
}

.sub-suboption-item.selected {
    border-color: var(--success-color);
    background: linear-gradient(135deg, var(--success-color)10, var(--success-color)05);
    color: var(--text-primary);
    font-weight: 500;
}

.sub-suboption-item.selected::after {
    content: '\F26A';
    font-family: 'bootstrap-icons';
    position: absolute;
    right: 6px;
    color: var(--success-color);
    font-size: 0.8rem;
}

/* Connection Lines */
.connection-lines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
}


.column-summary-inline {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.75rem;
    font-size: 0.82rem;
}

.summary-inline-item {
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    position: relative;
    padding: 0.25rem 0.7rem 0.25rem 0;
    color: var(--text-primary);
    min-width: 5.1rem;
}

.summary-inline-item:not(:first-child)::before {
    content: '';
    position: absolute;
    left: -0.45rem;
    top: 50%;
    transform: translateY(-50%);
    width: 1px;
    height: 58%;
    background: var(--divider-color);
}

.summary-inline-icon {
    width: 1.65rem;
    height: 1.65rem;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 0.88rem;
    background: rgba(var(--primary-rgb), 0.12);
    color: var(--primary-color);
    box-shadow: 0 4px 10px rgba(var(--primary-rgb), 0.1);
}

.summary-inline-icon--selected {
    background: rgba(var(--success-rgb), 0.16);
    color: var(--success-color);
    box-shadow: 0 4px 10px rgba(var(--success-rgb), 0.12);
}

.summary-inline-icon--flagged {
    background: rgba(var(--danger-rgb), 0.16);
    color: var(--danger-color);
    box-shadow: 0 4px 10px rgba(var(--danger-rgb), 0.12);
}

.summary-inline-icon--missing {
    background: rgba(var(--warning-rgb), 0.18);
    color: var(--warning-color);
    box-shadow: 0 4px 10px rgba(var(--warning-rgb), 0.14);
}

.summary-inline-copy {
    display: flex;
    flex-direction: column;
    gap: 0.05rem;
    align-items: flex-start;
}

.summary-inline-label {
    font-size: 0.62rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
    font-weight: 600;
}

.summary-inline-value {
    font-size: 1.02rem;
    font-weight: 600;
    color: var(--text-primary);
    line-height: 1.05;
}

.summary-header h6 {
    margin: 0;
    color: var(--text-primary);
}

.suboption-item.locked,
.sub-suboption-item.locked {
    pointer-events: none;
    opacity: 0.45;
}
.selected-category-item[data-locked="true"] .selected-category-header {
    opacity: 0.6;
    pointer-events: none;
}
.selection-count {
    font-size: 0.85rem;
    padding: 0.3rem 0.5rem;
    background: var(--primary-gradient);
    color: white;
    border-radius: 6px;
    font-weight: 500;
}

.selected-items-container {
    margin-bottom: 1rem;
    max-height: 150px;
    overflow-y: auto;
}

.selected-item-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.4rem 0.6rem;
    background: var(--success-color)20;
    color: var(--success-color);
    border: 1px solid var(--success-color);
    border-radius: 6px;
    font-size: 0.8rem;
    margin: 0.25rem;
    transition: all 0.2s ease;
}

.selected-item-badge:hover {
    background: var(--success-color);
    color: white;
}

.summary-actions {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
}

/* Responsive Design */
@media (max-width: 1200px) {
    .analysis-layout-container {
        flex-direction: column;
    }
    
    .analysis-cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    }
    
    .selected-categories-sidebar {
        width: 100%;
        max-width: 100%;
        position: relative;
        padding: 1rem;
    }
}

@media (max-width: 768px) {
    .analysis-layout-container {
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .analysis-cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 0.5rem;
    }
    
    .selected-categories-sidebar {
        width: 100%;
        max-width: 100%;
        position: relative;
        padding: 0.75rem;
    }
    
    .analysis-category-card {
        min-height: 65px;
        max-height: 75px;
        padding: 0.5rem;
    }
    
    .category-card-icon {
        width: 28px;
        height: 28px;
        font-size: 0.9rem;
    }
    
    .category-card-title {
        font-size: 0.8rem;
    }
    
    .category-card-subtitle {
        font-size: 0.7rem;
    }
    .selected-categories-sidebar {
        padding: 0.7rem 0.85rem;
        border-radius: 14px;
        gap: 0.55rem;
    }

    .sidebar-content {
        flex-wrap: nowrap;
        overflow-x: auto;
    }
}

@media (max-width: 480px) {
    .analysis-cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    }
    
    .analysis-category-card {
        min-height: 60px;
        max-height: 70px;
    }
}


/* ======= NOTEBOOK CELLS ======= */

.notebook-cell.executing {
    border-color: var(--warning-color);
    background: linear-gradient(135deg, var(--bg-primary) 0%, rgba(237, 137, 54, 0.05) 100%);
}

.notebook-cell.error {
    border-color: var(--danger-color);
    background: linear-gradient(135deg, var(--bg-primary) 0%, rgba(245, 101, 101, 0.05) 100%);
}

.cell-header {
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
}

.cell-content {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.cell-output {
    border-top: 1px solid var(--divider-color);
    background: var(--bg-accent);
}

/* Code Editor */
.code-editor,
.code-textarea {
    background: var(--code-bg);
    border: 1px solid var(--code-border);
    color: var(--code-text);
}

.code-editor:focus,
.code-textarea:focus {
    background: var(--bg-primary);
    border-color: var(--primary-color);
    box-shadow: var(--focus-ring);
}

/* Output Areas */
.output-area {
    background: var(--bg-accent);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
}

.stdout-output {
    background: var(--code-bg);
    border: 1px solid var(--code-border);
    color: var(--code-text);
}

.stderr-output {
    background: linear-gradient(135deg, var(--warning-color)10, var(--warning-color)05);
    border: 1px solid var(--warning-color);
    color: var(--warning-color);
}

/* ======= BUTTONS & INTERACTIVE ELEMENTS ======= */

.btn-primary {
    background: var(--primary-gradient);
    border-color: var(--primary-color);
    color: var(--text-inverse);
    box-shadow: var(--shadow-sm);
}

.btn-primary:hover {
    background: var(--primary-color);
    border-color: var(--primary-color);
    box-shadow: var(--shadow-md);
}

.btn-success {
    background: var(--success-gradient);
    border-color: var(--success-color);
    color: var(--text-inverse);
    box-shadow: var(--shadow-sm);
}

.btn-success:hover {
    background: var(--success-color);
    border-color: var(--success-color);
    box-shadow: var(--shadow-md);
}

.btn-outline-primary {
    border-color: var(--primary-color);
    color: var(--primary-color);
    background: transparent;
}

.btn-outline-primary:hover {
    background: var(--primary-color);
    color: var(--text-inverse);
}

.btn-outline-secondary {
    border-color: var(--text-secondary);
    color: var(--text-secondary);
    background: transparent;
}

.btn-outline-secondary:hover {
    background: var(--text-secondary);
    color: var(--bg-primary);
}

/* ======= DOMAIN DETECTION ======= */

.domain-badge,
.domain-badge-compact {
    background: var(--primary-gradient);
    color: var(--text-inverse);
    box-shadow: var(--shadow-lg);
}

.domain-badge:hover,
.domain-badge-compact:hover {
    box-shadow: var(--shadow-xl);
}

/* ======= MODALS ======= */

.modal-content {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-2xl);
    color: var(--text-primary);
}

.modal-header {
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
}

.modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

/* ======= CHARTS & VISUALIZATIONS ======= */

.chart-container {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-sm);
}

.plots-container {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
}

.dataframe-container {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
}

/* ======= UTILITY CLASSES ======= */

.text-muted {
    color: var(--text-muted)  ;
}

.border {
    border-color: var(--border-color)  ;
}

.bg-light {
    background-color: var(--bg-secondary)  ;
}

.bg-white {
    background-color: var(--bg-primary)  ;
}

/* ======= SCROLLBARS (Dark Mode Support) ======= */

/* ======= LOADING & ERROR STATES ======= */

.loading-spinner {
    border-color: var(--text-muted);
    border-top-color: var(--primary-color);
}

.error-message {
    background: linear-gradient(135deg, var(--danger-color)10, var(--danger-color)05);
    color: var(--danger-color);
    border: 1px solid var(--danger-color);
}

.success-message {
    background: linear-gradient(135deg, var(--success-color)10, var(--success-color)05);
    color: var(--success-color);
    border: 1px solid var(--success-color);
}

/* Loading overlay for charts and components */
.loading-overlay-centered {
    height: 200px;
}

/* Chart error state */
.chart-error-state {
    height: 200px;
}

/* Tab loading overlay */
.tab-loading-overlay {
    display: block;
}

/* ======= RATE LIMIT MONITOR STYLES ======= */

.rate-limit-container-custom {
    min-height: 100px;
    border: 2px solid var(--primary-color);
    background: var(--bg-secondary);
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: var(--shadow-sm);
}

.rate-limit-header-gradient {
    background: var(--primary-gradient);
    color: var(--text-inverse);
}

.rate-limit-progress-thin {
    height: 3px  ;
}

.rate-limit-progress-bar-fill {
    width: 0%;
}

.rate-limit-display {
    transition: all 0.3s ease;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 0.75rem 0.9rem;
    box-shadow: var(--shadow-xs);
    color: var(--text-secondary);
}

.rate-limit-display .text-muted {
    color: var(--text-secondary) !important;
}

.rate-limit-status .badge {
    font-size: 0.75rem;
}

.rate-limit-warning .card {
    background-color: rgba(var(--warning-rgb), 0.15);
    border-color: rgba(var(--warning-rgb), 0.35);
}

.rate-limit-error .card {
    background-color: rgba(var(--danger-rgb), 0.15);
    border-color: rgba(var(--danger-rgb), 0.35);
}

.rate-limit-progress {
    height: 6px;
    background-color: var(--bg-tertiary);
    border-radius: 3px;
    overflow: hidden;
    margin-top: 3px;
}

.rate-limit-progress-bar {
    height: 100%;
    transition: width 0.6s ease;
    border-radius: 3px;
}

.active-execution-item {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 8px 12px;
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 0.85rem;
}

.active-execution-status {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #28a745;
    animation: pulse 1.5s infinite;
    margin-right: 8px;
}

body.dark-mode .rate-limit-container-custom {
    background: var(--bg-tertiary);
}

body.dark-mode .rate-limit-display {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

body.dark-mode .rate-limit-display .text-muted {
    color: var(--text-secondary) !important;
}

body.dark-mode .rate-limit-progress {
    background-color: var(--bg-secondary);
}

body.dark-mode .rate-limit-warning .card {
    background-color: rgba(var(--warning-rgb), 0.22);
}

body.dark-mode .rate-limit-error .card {
    background-color: rgba(var(--danger-rgb), 0.22);
}

body.dark-mode .active-execution-item {
    background: var(--bg-tertiary);
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ======= ADDITIONAL COMPONENT STYLES  ======= */

/* Custom Analysis Plot Styling */
.custom-analysis-plot {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* Badge Close Button */
.badge-close-btn {
    font-size: 0.75em;
}

/* Notebook Plot Images */
.notebook-plot-image {
    max-width: 100%;
    height: auto;
    border: 1px solid #dee2e6;
    border-radius: 4px;
}

/* Markdown Editor */
.markdown-editor-min-height {
    min-height: 100px;
}

/* Domain Detection Progress Bars */
.domain-confidence-progress {
    height: 10px;
}

.secondary-domain-progress {
    height: 6px;
}

.domain-score-progress {
    height: 4px;
}

.domain-warning-alert {
    background: rgba(var(--warning-rgb), 0.12);
    border: 1px solid rgba(var(--warning-rgb), 0.28);
    color: var(--text-primary);
    border-radius: 12px;
    padding: 1rem;
    box-shadow: var(--shadow-xs);
}

.domain-warning-alert strong {
    color: rgba(var(--warning-rgb), 0.95);
}

.domain-warning-alert .text-warning {
    color: rgba(var(--warning-rgb), 0.85) !important;
}

.domain-detection-card {
    background: var(--bg-primary);
    border-color: rgba(var(--primary-rgb), 0.22);
    border-radius: 14px;
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.domain-detection-card__header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.16), rgba(var(--primary-rgb), 0.05));
    color: var(--text-primary);
    border-bottom: 1px solid rgba(var(--primary-rgb), 0.18);
}

.domain-detection-card__header h6 {
    display: flex;
    align-items: center;
    gap: 0.45rem;
    color: var(--text-primary);
    font-weight: 600;
}

.domain-detection-card__header .bi {
    color: var(--primary-color);
}

.domain-detection-card .card-body {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.domain-detection-card .progress {
    background: rgba(var(--primary-rgb), 0.08);
    border-radius: 999px;
}

.domain-detection-card .progress-bar {
    border-radius: 999px;
}

.domain-detection-card .badge.bg-primary {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.85), rgba(var(--primary-rgb), 0.65));
}

.domain-recommendations-title {
    display: flex;
    align-items: center;
    gap: 0.45rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.75rem;
}

.domain-recommendations-title .bi {
    color: var(--success-color);
}

.domain-recommendations-card {
    background: var(--bg-primary);
    border-color: rgba(var(--success-rgb), 0.22);
    border-radius: 14px;
    box-shadow: var(--shadow-sm);
}

.domain-recommendations-card .card-body {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.domain-recommendations-list .list-group-item {
    background: transparent;
    color: var(--text-secondary);
    border-bottom: 1px solid rgba(var(--success-rgb), 0.16);
    border-radius: 0;
}

.domain-recommendations-list .list-group-item:last-child {
    border-bottom: none;
}

.domain-recommendations-list .bi-check-circle-fill {
    color: var(--success-color);
}

/* Recommendation Cards */
.recommendation-card-clickable {
    cursor: pointer;
}

/* ======= NOTEBOOK TAB STYLES (MOVED FROM HTML) ======= */

.notebook-tab {
    position: relative;
    width: 100%;
    padding: 1rem 0 1.5rem;
    color: var(--text-primary);
}

/* ======= GLOBAL NAVBAR FOR EDA PAGES ======= */

.modern-nav {
    position: sticky;
    top: 0;
    z-index: 180;
    backdrop-filter: blur(12px);
    background: rgba(255, 255, 255, 0.92);
    box-shadow: var(--shadow-md);
}

body.dark-mode .modern-nav {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
}

.eda-nav .nav-container {
    width: 100%;
    margin: 0;
    padding: 0.75rem clamp(1.5rem, 3vw, 3.25rem);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1.25rem;
}

.eda-nav .nav-links {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.eda-nav .nav-actions {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.eda-nav .nav-link {
    padding: 0.5rem 0.9rem;
    border-radius: 10px;
    font-weight: 500;
    color: var(--text-secondary);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    border: 1px solid transparent;
    transition: transform 0.2s ease, box-shadow 0.2s ease, color 0.2s ease, background 0.2s ease, border-color 0.2s ease;
}

.eda-nav .nav-link:hover {
    background: rgba(var(--primary-rgb), 0.08);
    border-color: rgba(var(--primary-rgb), 0.15);
    color: var(--primary-color);
    transform: translateY(-1px);
    box-shadow: var(--shadow-xs);
}

.eda-nav .nav-link.active {
    background: var(--primary-gradient);
    color: var(--text-inverse);
    box-shadow: var(--shadow-sm);
}

.eda-nav .nav-greeting {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.theme-toggle-nav {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    border: none;
    background: var(--primary-gradient);
    color: var(--text-inverse);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    box-shadow: var(--shadow-sm);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.theme-toggle-nav:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-md);
}

.theme-toggle-nav:active {
    transform: scale(0.97);
}

@media (max-width: 768px) {
    .eda-nav .nav-container {
        padding: 0.75rem 1.25rem;
        flex-direction: column;
        align-items: stretch;
        gap: 0.75rem;
    }

    .eda-nav .nav-links {
        justify-content: center;
    }

    .eda-nav .nav-actions {
        justify-content: center;
    }
}

.notebook-grid {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
}

.notebook-overview-card {
    gap: 1.5rem;
}

.overview-card-header {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: flex-start;
    gap: 0.75rem;
}

.overview-card-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.overview-card-actions .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
}

.overview-card-body {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    align-items: stretch;
}

.overview-section {
    flex: 1 1 280px;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.overview-section-title {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
}

.overview-section-subtitle {
    font-size: 0.78rem;
    color: var(--text-secondary);
}

.overview-divider {
    width: 1px;
    background: var(--divider-color);
    min-height: 100%;
    align-self: stretch;
}

.column-summary {
    display: flex;
    flex-direction: column;
    gap: 0.65rem;
}

.column-summary-tags {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.78rem;
    color: var(--text-secondary);
}

.summary-tag {
    position: relative;
    padding-right: 0.7rem;
    color: inherit;
}

.summary-tag:not(:last-child)::after {
    content: '|';
    position: absolute;
    right: 0.2rem;
    color: var(--divider-color);
}

.column-insights-modal {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 18px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-lg);
}

.column-insights-modal .modal-header {
    border-bottom: 1px solid var(--border-color);
    background: var(--bg-secondary);
    color: var(--text-primary);
}

.column-insights-modal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.column-insights-modal .modal-body .column-actions .btn-group .btn {
    color: inherit;
}

body.dark-mode .domain-compact-button {
    border-color: rgba(var(--primary-rgb), 0.45);
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.25), rgba(var(--primary-rgb), 0.08));
    color: var(--text-primary);
}

body.dark-mode .domain-compact-button:hover,
body.dark-mode .domain-compact-button:focus {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.32), rgba(var(--primary-rgb), 0.12));
    box-shadow: 0 16px 28px rgba(var(--primary-rgb), 0.2);
}

body.dark-mode .domain-compact-button--error {
    border-color: rgba(var(--danger-rgb), 0.55);
    background: linear-gradient(135deg, rgba(var(--danger-rgb), 0.35), rgba(var(--danger-rgb), 0.1));
}

body.dark-mode .domain-compact-confidence {
    color: rgba(255, 255, 255, 0.7);
}

body.dark-mode .domain-compact-separator {
    color: rgba(var(--primary-rgb), 0.75);
}

body.dark-mode .column-summary-inline {
    color: var(--text-primary);
}

body.dark-mode .summary-inline-item:not(:first-child)::before {
    background: rgba(255, 255, 255, 0.18);
}

body.dark-mode .summary-inline-label {
    color: rgba(255, 255, 255, 0.65);
}

body.dark-mode .summary-inline-value {
    color: var(--text-primary);
}

body.dark-mode .summary-inline-icon {
    background: rgba(var(--primary-rgb), 0.28);
    color: var(--primary-color);
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.45);
}

body.dark-mode .summary-inline-icon--selected {
    background: rgba(var(--success-rgb), 0.32);
    color: var(--success-color);
}

body.dark-mode .summary-inline-icon--flagged {
    background: rgba(var(--danger-rgb), 0.32);
    color: var(--danger-color);
}

body.dark-mode .summary-inline-icon--missing {
    background: rgba(var(--warning-rgb), 0.35);
    color: var(--warning-color);
}

body.dark-mode .domain-warning-alert {
    background: rgba(var(--warning-rgb), 0.18);
    border-color: rgba(var(--warning-rgb), 0.32);
    color: rgba(247, 250, 252, 0.92);
    box-shadow: 0 14px 32px rgba(0, 0, 0, 0.4);
}

body.dark-mode .domain-warning-alert strong {
    color: rgba(var(--warning-rgb), 0.9);
}

body.dark-mode .domain-warning-alert .text-warning {
    color: rgba(var(--warning-rgb), 0.88) !important;
}

body.dark-mode .domain-detection-card {
    background: var(--bg-secondary);
    border-color: rgba(var(--primary-rgb), 0.35);
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55);
}

body.dark-mode .domain-detection-card__header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.34), rgba(var(--primary-rgb), 0.18));
    color: var(--text-primary);
    border-bottom-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode .domain-detection-card__header .bi {
    color: rgba(var(--primary-rgb), 0.85);
}

body.dark-mode .domain-detection-card .card-body {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

body.dark-mode .domain-detection-card .progress {
    background: rgba(255, 255, 255, 0.15);
}

body.dark-mode .domain-detection-card .progress-bar.bg-primary {
    background-color: var(--primary-color) !important;
}

body.dark-mode .domain-detection-card .progress-bar.bg-secondary {
    background-color: rgba(var(--primary-rgb), 0.45) !important;
}

body.dark-mode .domain-detection-card .badge.bg-primary {
    background: rgba(var(--primary-rgb), 0.55) !important;
}

body.dark-mode .domain-recommendations-title {
    color: var(--text-primary);
}

body.dark-mode .domain-recommendations-title .bi {
    color: rgba(var(--success-rgb), 0.8);
}

body.dark-mode .domain-recommendations-card {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.95);
    border-color: rgba(var(--success-rgb), 0.32);
    box-shadow: 0 18px 36px rgba(0, 0, 0, 0.55);
}

body.dark-mode .domain-recommendations-card .card-body {
    background: transparent;
    color: var(--text-primary);
}

body.dark-mode .domain-recommendations-list .list-group-item {
    background: transparent;
    color: rgba(226, 232, 240, 0.78);
    border-bottom-color: rgba(var(--success-rgb), 0.2);
}

body.dark-mode .domain-recommendations-list .bi-check-circle-fill {
    color: rgba(var(--success-rgb), 0.85);
}

body.dark-mode .summary-tag:not(:last-child)::after {
    color: rgba(255, 255, 255, 0.25);
}

body.dark-mode .column-insights-modal {
    background: var(--bg-secondary);
    border-color: var(--border-color);
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55);
}

body.dark-mode .column-insights-modal .modal-header {
    background: var(--bg-tertiary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

body.dark-mode .column-insights-modal .modal-body {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

body.dark-mode .text-muted,
body.dark-mode .notebook-card-subtitle,
body.dark-mode .overview-section-subtitle,
body.dark-mode small.text-muted {
    color: rgba(226, 232, 240, 0.72) !important;
}

body.dark-mode .btn-outline-secondary {
    color: rgba(226, 232, 240, 0.85);
    border-color: rgba(226, 232, 240, 0.35);
}

body.dark-mode .btn-outline-secondary:hover,
body.dark-mode .btn-outline-secondary:focus {
    color: var(--text-inverse);
    background: rgba(226, 232, 240, 0.18);
    border-color: rgba(226, 232, 240, 0.45);
}

body.dark-mode .btn-outline-primary {
    color: rgba(226, 232, 240, 0.9);
    border-color: rgba(var(--primary-rgb), 0.45);
}

body.dark-mode .btn-outline-primary:hover,
body.dark-mode .btn-outline-primary:focus {
    color: var(--text-inverse);
    background: rgba(var(--primary-rgb), 0.25);
    border-color: rgba(var(--primary-rgb), 0.6);
}

body.dark-mode .btn-outline-success {
    color: rgba(226, 232, 240, 0.9);
    border-color: rgba(var(--success-rgb), 0.45);
}

body.dark-mode .btn-outline-success:hover,
body.dark-mode .btn-outline-success:focus {
    color: var(--text-inverse);
    background: rgba(var(--success-rgb), 0.25);
    border-color: rgba(var(--success-rgb), 0.6);
}

body.dark-mode .summary-inline-item {
    color: var(--text-primary);
}

.overview-state {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.6rem 0.85rem;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.overview-state--error {
    border-color: rgba(var(--danger-rgb), 0.35);
    background: rgba(var(--danger-rgb), 0.1);
    color: var(--danger-color);
}

.analysis-results-placeholder {
    display: flex;
    gap: 0.75rem;
    align-items: flex-start;
    padding: 1rem 1.1rem;
    border: 1px dashed var(--border-color);
    border-radius: var(--border-radius);
    color: var(--text-secondary);
    background: var(--bg-secondary);
    transition: opacity 0.25s ease;
}

.analysis-results-placeholder i {
    font-size: 1.4rem;
    color: var(--primary-color);
    line-height: 1;
}

.analysis-results-placeholder.d-none {
    display: none;
}

@media (max-width: 992px) {
    .overview-card-body {
        flex-direction: column;
    }

    .overview-divider {
        display: none;
    }

    .overview-section {
        flex: 1 1 auto;
    }
}

.notebook-card {
    background: var(--card-background);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    padding: 1.1rem 1.2rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
}
 
.notebook-card:not(.notebook-header-card):hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: rgba(var(--primary-rgb), 0.35);
}

.notebook-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 0.75rem;
}

.analysis-header-actions {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
    justify-content: flex-end;
}

.analysis-header-actions .badge {
    border-radius: 999px;
    font-size: 0.68rem;
    letter-spacing: 0.01em;
    padding: 0.35rem 0.65rem;
    background: rgba(var(--primary-rgb), 0.08);
    color: var(--text-secondary);
}

.analysis-header-actions .btn {
    white-space: nowrap;
}

.notebook-card-title {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.1rem;
}

.notebook-card-subtitle {
    font-size: 0.78rem;
    color: var(--text-secondary);
}

.notebook-card-body {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.notebook-main {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
}

.notebook-action-group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.dataset-name-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.5rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--border-color);
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.dataset-name-row .value {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-primary);
}

.dataset-metrics-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 0.75rem;
}

.dataset-metric {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 0.85rem;
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
}

.dataset-metric .label {
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: var(--text-secondary);
}

.dataset-metric .value {
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--text-primary);
}

.quality {
    align-self: flex-start;
    padding: 0.25rem 0.65rem;
    border-radius: 999px;
    font-size: 0.72rem;
    font-weight: 600;
    background: rgba(var(--success-rgb), 0.12);
    color: var(--success-color);
    letter-spacing: 0.03em;
}

.quality.quality--medium {
    background: rgba(var(--warning-rgb), 0.15);
    color: var(--warning-color);
}

.quality.quality--low {
    background: rgba(var(--danger-rgb), 0.15);
    color: var(--danger-color);
}

.notebook-state {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.9rem 1rem;
    border-radius: 12px;
    border: 1px dashed var(--border-color);
    background: var(--bg-secondary);
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.notebook-state--error {
    border-color: rgba(var(--danger-rgb), 0.4);
    background: rgba(var(--danger-rgb), 0.08);
    color: var(--danger-color);
    flex-direction: column;
    text-align: center;
}

.domain-chip {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
    padding: 0.9rem 1rem;
    border-radius: 12px;
    background: var(--domain-gradient);
    color: var(--text-inverse);
    box-shadow: var(--shadow-sm);
}

.domain-chip .domain-name {
    font-size: 0.95rem;
    font-weight: 600;
    letter-spacing: 0.02em;
}

.domain-chip .domain-score {
    font-size: 0.78rem;
    opacity: 0.85;
}

.domain-compact {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.35rem 0;
}

.domain-compact-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.45rem;
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: 999px;
    border: 1px solid rgba(var(--primary-rgb), 0.25);
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.12), rgba(var(--primary-rgb), 0.02));
    color: var(--text-primary);
    font-weight: 600;
    font-size: 0.95rem;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.domain-compact-button:hover,
.domain-compact-button:focus {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.18), rgba(var(--primary-rgb), 0.05));
    box-shadow: 0 12px 24px rgba(var(--primary-rgb), 0.1);
    transform: translateY(-1px);
}

.domain-compact-button:disabled {
    opacity: 0.7;
    cursor: progress;
    box-shadow: none;
    transform: none;
}

.domain-compact-button--loading {
    cursor: progress;
}

.domain-compact-button--error {
    border-color: rgba(var(--danger-rgb), 0.35);
    background: linear-gradient(135deg, rgba(var(--danger-rgb), 0.16), rgba(var(--danger-rgb), 0.04));
}

.domain-compact-button--error .domain-compact-label,
.domain-compact-button--error .domain-compact-confidence {
    color: var(--danger-color);
}

.domain-compact-label {
    text-transform: capitalize;
    letter-spacing: 0.02em;
}

.domain-compact-confidence {
    font-size: 0.82rem;
    color: var(--text-secondary);
    letter-spacing: 0.02em;
}

.domain-compact-separator {
    font-size: 0.75rem;
    color: rgba(var(--primary-rgb), 0.55);
}

.domain-compact-spinner {
    margin-right: 0.2rem;
}

.domain-compact-button:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.25);
}

.domain-badge,
.domain-badge-compact {
    background: var(--domain-gradient);
    color: var(--text-inverse);
    border-radius: 12px;
    padding: 0.85rem 1rem;
    text-align: center;
    box-shadow: var(--shadow-sm);
    transition: transform 0.25s ease;
}

.domain-badge:hover,
.domain-badge-compact:hover {
    transform: translateY(-2px);
}

.domain-name {
    font-size: 0.95rem;
    font-weight: 600;
    letter-spacing: 0.03em;
}

.confidence-score {
    font-size: 0.78rem;
    opacity: 0.85;
}

.domain-loading {
    display: flex;
    gap: 0.75rem;
    align-items: flex-start;
}

.domain-loading .spinner-border {
    color: rgba(var(--primary-rgb), 0.65);
    width: 1rem;
    height: 1rem;
}

.domain-results {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.domain-summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
}

.domain-badge--primary {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
    padding: 1rem 1.1rem;
    border-radius: 12px;
    background: var(--domain-gradient);
    color: var(--text-inverse);
    box-shadow: var(--shadow-sm);
    min-width: 180px;
}

.domain-badge--primary .domain-name {
    font-size: 1.05rem;
    letter-spacing: 0.04em;
    text-transform: capitalize;
}

.domain-badge--primary .confidence-score {
    opacity: 0.85;
}

.domain-confidence {
    display: flex;
    align-items: center;
    gap: 0.85rem;
}

.domain-confidence-meter {
    width: 140px;
    height: 8px;
    background: rgba(var(--primary-rgb), 0.08);
    border-radius: 999px;
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(var(--primary-rgb), 0.12);
}

.domain-confidence-fill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, rgba(var(--primary-rgb), 0.15), rgba(var(--primary-rgb), 0.75));
    transition: width 0.4s ease;
}

.domain-confidence-label {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
}

.domain-confidence-value {
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--text-primary);
}

.domain-confidence-status {
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
}

.domain-confidence-status[data-status="high"] {
    color: var(--success-color);
}

.domain-confidence-status[data-status="medium"] {
    color: var(--warning-color);
}

.domain-confidence-status[data-status="low"] {
    color: var(--danger-color);
}

.domain-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 1.25rem;
    padding: 0.6rem 0.8rem;
    border-radius: 10px;
    border: 1px dashed var(--border-color);
    background: var(--bg-secondary);
}

.domain-meta-item {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
    min-width: 120px;
}

.domain-meta-item .label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: var(--text-secondary);
}

.domain-meta-item .value {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-primary);
}

.domain-secondary {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
}

.domain-secondary-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.domain-secondary-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    padding: 0.65rem 0.75rem;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-primary);
    box-shadow: var(--shadow-xs);
}

.secondary-domain-name {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
}

.secondary-domain-name span:first-child {
    font-weight: 600;
    text-transform: capitalize;
    color: var(--text-primary);
}

.secondary-domain-name span:last-child {
    font-size: 0.72rem;
    color: var(--text-secondary);
}

.domain-secondary-bar {
    width: 140px;
    height: 6px;
    background: rgba(var(--info-rgb), 0.15);
    border-radius: 999px;
    overflow: hidden;
}

.domain-secondary-bar-fill {
    height: 100%;
    width: 0;
    background: linear-gradient(90deg, rgba(var(--info-rgb), 0.35), rgba(var(--info-rgb), 0.75));
    transition: width 0.4s ease;
}

.domain-secondary-confidence {
    min-width: 36px;
    text-align: right;
    font-size: 0.78rem;
    font-weight: 600;
    color: var(--text-secondary);
}

.domain-signals {
    display: flex;
    flex-direction: column;
    gap: 0.45rem;
}

.domain-signal-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
}

.domain-signal {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.78rem;
    color: var(--text-secondary);
    padding: 0.45rem 0.55rem;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-primary);
}

.domain-signal i {
    color: rgba(var(--primary-rgb), 0.8);
}

.domain-recommendations-preview {
    padding: 0.85rem 1rem;
    border-radius: 12px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
}

.domain-recommendations-preview .domain-recommendation-list {
    display: flex;
    flex-direction: column;
    gap: 0.45rem;
    margin: 0;
    padding: 0;
    list-style: none;
}

.domain-recommendations-preview .domain-recommendation {
    font-size: 0.78rem;
    color: var(--text-secondary);
    display: flex;
    gap: 0.45rem;
    align-items: flex-start;
}

.domain-recommendations-preview .domain-recommendation i {
    color: rgba(var(--success-rgb), 0.85);
}

.domain-actions {
    margin-top: 0.25rem;
}

.notebook-scroll {
    max-height: 360px;
    overflow-y: auto;
    padding-right: 0.25rem;
}

.notebook-scroll::-webkit-scrollbar {
    width: 6px;
}

.notebook-scroll::-webkit-scrollbar-thumb {
    background: rgba(var(--primary-rgb), 0.2);
    border-radius: 999px;
}



.column-insights-content {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
}

.column-header-actions {
    display: inline-flex;
    gap: 0.45rem;
}

.column-header-actions .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 0;
    padding-inline: 0.65rem;
}

/* Make the column insights expand button slightly larger and ensure it sits above everything */
#columnExpandButton,
.column-header-actions .btn {
    position: relative;
    z-index: 1000001;
}

/* Specific styling for the expand button to improve hit area and visibility */
#columnExpandButton {
    padding-inline: 0.85rem;
    padding-block: 0.35rem;
    font-size: 0.95rem;
    border-radius: 8px;
    line-height: 1;
}

.column-metrics-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 0.75rem;
}

@media (max-width: 600px) {
    .column-metrics-grid {
        grid-template-columns: 1fr;
    }
}

.column-metric-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 0.85rem 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
    box-shadow: var(--shadow-xs);
}

.column-metric-card .metric-label {
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
}

.column-metric-card .metric-value {
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--text-primary);
}

.column-metric-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.column-metric-tags .tag {
    padding: 0.25rem 0.6rem;
    border-radius: 999px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    font-size: 0.72rem;
    color: var(--text-secondary);
    letter-spacing: 0.03em;
}

.column-actions {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 0.75rem;
}

.column-actions .btn-group {
    flex-wrap: wrap;
}

.column-recommendations {
    border-radius: 12px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    padding: 0.85rem 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
}

.column-recommendations-list {
    display: flex;
    flex-direction: column;
    gap: 0.55rem;
}

.column-recommendation {
    display: flex;
    gap: 0.6rem;
    align-items: flex-start;
    padding: 0.6rem 0.75rem;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-primary);
    box-shadow: var(--shadow-xs);
    font-size: 0.78rem;
    color: var(--text-secondary);
}

.column-recommendation i {
    margin-top: 0.1rem;
}

.column-recommendation--warning {
    border-color: rgba(var(--warning-rgb), 0.35);
    background: rgba(var(--warning-rgb), 0.08);
}

.column-recommendation--warning i {
    color: var(--warning-color);
}

.column-recommendation--info {
    border-color: rgba(var(--info-rgb), 0.25);
    background: rgba(var(--info-rgb), 0.08);
}

.column-recommendation--info i {
    color: var(--info-color);
}

.column-filters {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.column-search {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.55rem 0.75rem;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
}

.column-search i {
    color: var(--text-secondary);
}

.column-search input {
    border: none;
    background: transparent;
    width: 100%;
    color: var(--text-primary);
    font-size: 0.85rem;
    outline: none;
}

.column-filter-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
}

.column-filter-button {
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    color: var(--text-secondary);
    border-radius: 999px;
    padding: 0.35rem 0.85rem;
    font-size: 0.75rem;
    font-weight: 600;
    transition: all 0.2s ease;
}

.column-filter-button:hover {
    border-color: rgba(var(--primary-rgb), 0.35);
    color: var(--primary-color);
}

.column-filter-button.active {
    background: rgba(var(--primary-rgb), 0.1);
    color: var(--primary-color);
    border-color: rgba(var(--primary-rgb), 0.4);
    box-shadow: var(--shadow-xs);
}

.column-items-wrapper {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    max-height: 65vh;
    overflow-y: auto;
    padding-right: 0.25rem;
}

.column-items {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1rem;
    align-items: stretch;
}

@media (max-width: 992px) {
    .column-items {
        grid-template-columns: 1fr;
    }
}

.column-empty-state {
    text-align: center;
    padding: 1.4rem 1rem;
    border-radius: 12px;
    border: 1px dashed var(--border-color);
    background: var(--bg-secondary);
    color: var(--text-secondary);
}

.column-empty-state i {
    font-size: 1.4rem;
    margin-bottom: 0.35rem;
    display: block;
}

.notebook-cells,
.analysis-results {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    min-height: 260px;
}

.notebook-cell {
    position: relative;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 14px;
    box-shadow: var(--shadow-xs);
    overflow: hidden;
    transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
}

.notebook-cell:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: rgba(var(--primary-rgb), 0.35);
}

.notebook-cell.executing {
    border-color: var(--warning-color);
    box-shadow: 0 0 0 1px rgba(var(--warning-rgb), 0.15);
    background: rgba(var(--warning-rgb), 0.08);
}

.notebook-cell.error {
    border-color: var(--danger-color);
    box-shadow: 0 0 0 1px rgba(var(--danger-rgb), 0.15);
    background: rgba(var(--danger-rgb), 0.04);
}

.cell-container {
    display: flex;
    flex-direction: column;
    gap: 0;
}

.cell-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.75rem;
    padding: 0.85rem 1rem;
    border-bottom: 1px solid var(--border-color);
    background: var(--bg-secondary);
}

.cell-type-indicator {
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
}

.cell-type-indicator.analysis-cell {
    color: var(--success-color);
}

.cell-type-indicator.python-cell {
    color: rgba(var(--primary-rgb), 1);
}

.analysis-result-card {
    position: relative;
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-color, #e2e8f0);
    border-radius: 18px;
    box-shadow: var(--shadow-md, 0 10px 25px rgba(15, 23, 42, 0.08));
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.analysis-result-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-lg, 0 16px 35px rgba(15, 23, 42, 0.12));
    border-color: rgba(var(--primary-rgb, 47, 109, 243), 0.35);
}

.analysis-result-card.executing {
    border-color: rgba(var(--primary-rgb, 47, 109, 243), 0.45);
    box-shadow: 0 18px 42px rgba(var(--primary-rgb, 47, 109, 243), 0.24);
}

.analysis-result-card.error {
    border-color: rgba(var(--danger-rgb, 220, 38, 38), 0.45);
    box-shadow: 0 18px 42px rgba(var(--danger-rgb, 220, 38, 38), 0.22);
}

.analysis-result-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1.2rem;
    padding: 1.25rem 1.5rem 0.75rem;
}

.analysis-header-text {
    flex: 1 1 auto;
    min-width: 0;
}

.analysis-name-row {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    margin-bottom: 0.35rem;
}

.analysis-title {
    font-weight: 600;
    font-size: 1.05rem;
    color: var(--text-primary, #0f172a);
}

.analysis-description {
    margin: 0;
    color: var(--text-secondary, #475569);
    font-size: 0.92rem;
    max-width: 720px;
}

.analysis-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
    justify-content: flex-end;
}

.analysis-actions .btn {
    font-size: 0.75rem;
    border-radius: 999px;
    padding: 0.38rem 0.7rem;
}

.analysis-run-indicator {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 0.72rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    padding: 0.38rem 0.75rem;
    border-radius: 999px;
    background: rgba(var(--muted-rgb, 148, 163, 184), 0.18);
    color: var(--text-secondary, #475569);
    min-width: 96px;
}

.analysis-run-indicator.status-queued {
    background: rgba(var(--muted-rgb, 148, 163, 184), 0.18);
    color: var(--text-secondary, #475569);
}

.analysis-run-indicator.status-running {
    background: rgba(var(--primary-rgb, 47, 109, 243), 0.18);
    color: var(--primary-color, #2f6df3);
}

.analysis-run-indicator.status-success {
    background: rgba(var(--success-rgb, 34, 197, 94), 0.18);
    color: var(--success-color, #22c55e);
}

.analysis-run-indicator.status-error {
    background: rgba(var(--danger-rgb, 220, 38, 38), 0.18);
    color: var(--danger-color, #dc2626);
}

.analysis-meta-row {
    padding: 0 1.5rem 0.75rem;
}

.analysis-meta {
    font-size: 0.8rem;
    color: var(--text-tertiary, #6b7280);
}

.analysis-tags {
    padding: 0 1.5rem 0.75rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
}

.analysis-tag {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.72rem;
    font-weight: 500;
    padding: 0.22rem 0.6rem;
    border-radius: 999px;
    background: rgba(var(--primary-rgb, 47, 109, 243), 0.1);
    color: rgba(var(--primary-rgb, 47, 109, 243), 1);
}

.analysis-alerts {
    padding: 0 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.analysis-alerts .alert {
    margin-bottom: 0;
    border-radius: 12px;
    padding: 0.65rem 0.9rem;
    font-size: 0.82rem;
}

.analysis-body {
    padding: 1rem 1.5rem 1.5rem;
    border-top: 1px solid var(--border-color, #e2e8f0);
}

.analysis-result-card .analysis-output .output-section {
    margin-bottom: 1.2rem;
}

.analysis-result-card .analysis-output .stdout-output {
    background: #0f172a;
    color: #e2e8f0;
    border-radius: 12px;
    padding: 1rem 1.25rem;
    font-family: 'Fira Code', 'Source Code Pro', monospace;
    font-size: 0.85rem;
}

.analysis-result-card .analysis-output .stderr-output {
    background: rgba(var(--danger-rgb, 220, 38, 38), 0.08);
    border: 1px solid rgba(var(--danger-rgb, 220, 38, 38), 0.3);
    color: rgba(var(--danger-rgb, 220, 38, 38), 1);
    padding: 1rem 1.25rem;
    border-radius: 12px;
    font-family: 'Fira Code', 'Source Code Pro', monospace;
    font-size: 0.85rem;
}

.analysis-result-card .analysis-output table {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 6px 18px rgba(15, 23, 42, 0.08);
}

.analysis-result-card .analysis-output .notebook-plot-image {
    border-radius: 12px;
    box-shadow: 0 18px 35px rgba(15, 23, 42, 0.12);
}

.analysis-structured-section {
    border: 1px solid var(--border-color, #e2e8f0);
    border-radius: 16px;
    background: var(--bg-secondary, #f8fafc);
    padding: 1.25rem 1.5rem;
    margin-bottom: 1.25rem;
    box-shadow: var(--shadow-xs, 0 4px 6px rgba(15, 23, 42, 0.05));
}

.analysis-structured-section:last-child {
    margin-bottom: 0;
}

.structured-section-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1.25rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
}

.structured-section-heading h5 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary, #0f172a);
}

.analysis-section-summary {
    margin: 0.35rem 0 0;
    font-size: 0.9rem;
    color: var(--text-secondary, #475569);
    max-width: 720px;
}

.analysis-status-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.4rem 0.7rem;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    background: rgba(var(--primary-rgb, 47, 109, 243), 0.12);
    color: var(--primary-color, #2f6df3);
}

.analysis-status-badge.status-success {
    background: rgba(var(--success-rgb, 34, 197, 94), 0.18);
    color: var(--success-color, #22c55e);
}

.analysis-status-badge.status-warning {
    background: rgba(var(--warning-rgb, 234, 179, 8), 0.18);
    color: var(--warning-color, #ea9a3d);
}

.analysis-status-badge.status-error,
.analysis-status-badge.status-danger {
    background: rgba(var(--danger-rgb, 220, 38, 38), 0.18);
    color: var(--danger-color, #dc2626);
}

.analysis-status-badge.status-info {
    background: rgba(var(--info-rgb, 66, 153, 225), 0.18);
    color: var(--info-color, #4299e1);
}

.analysis-section {
    margin-top: 1.1rem;
}

.analysis-section:first-of-type {
    margin-top: 0;
}

.analysis-section h6 {
    font-size: 0.85rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-secondary, #475569);
    margin-bottom: 0.75rem;
}

.analysis-metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
    gap: 1rem;
}

.analysis-metric-card {
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-color, #e2e8f0);
    border-radius: 14px;
    padding: 0.9rem 1rem;
    box-shadow: var(--shadow-xs, 0 2px 6px rgba(15, 23, 42, 0.06));
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
}

.analysis-metric-card .metric-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
}

.analysis-metric-card .metric-label {
    font-size: 0.72rem;
    font-weight: 600;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--text-secondary, #475569);
}

.analysis-metric-card .metric-value {
    font-size: 1.35rem;
    font-weight: 600;
    color: var(--text-primary, #0f172a);
    display: flex;
    align-items: baseline;
    gap: 0.25rem;
}

.analysis-metric-card .metric-unit {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--text-secondary, #475569);
}

.analysis-metric-card .metric-description {
    font-size: 0.8rem;
    color: var(--text-secondary, #475569);
}

.analysis-insights-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.analysis-insight-item {
    display: flex;
    gap: 0.8rem;
    align-items: flex-start;
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-color, #e2e8f0);
    border-radius: 12px;
    padding: 0.8rem 1rem;
    box-shadow: var(--shadow-xs, 0 2px 8px rgba(15, 23, 42, 0.05));
}

.analysis-insight-item .insight-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.28rem 0.55rem;
    border-radius: 999px;
    font-size: 0.72rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    text-transform: uppercase;
}

.analysis-insight-item.insight-success {
    border-color: rgba(var(--success-rgb, 34, 197, 94), 0.25);
    background: rgba(var(--success-rgb, 34, 197, 94), 0.08);
}

.analysis-insight-item.insight-success .insight-badge {
    background: rgba(var(--success-rgb, 34, 197, 94), 0.18);
    color: var(--success-color, #22c55e);
}

.analysis-insight-item.insight-warning {
    border-color: rgba(var(--warning-rgb, 234, 179, 8), 0.25);
    background: rgba(var(--warning-rgb, 234, 179, 8), 0.08);
}

.analysis-insight-item.insight-warning .insight-badge {
    background: rgba(var(--warning-rgb, 234, 179, 8), 0.18);
    color: var(--warning-color, #ea9a3d);
}

.analysis-insight-item.insight-danger {
    border-color: rgba(var(--danger-rgb, 220, 38, 38), 0.25);
    background: rgba(var(--danger-rgb, 220, 38, 38), 0.08);
}

.analysis-insight-item.insight-danger .insight-badge {
    background: rgba(var(--danger-rgb, 220, 38, 38), 0.18);
    color: var(--danger-color, #dc2626);
}

.analysis-insight-item.insight-info {
    border-color: rgba(var(--info-rgb, 66, 153, 225), 0.25);
    background: rgba(var(--info-rgb, 66, 153, 225), 0.08);
}

.analysis-insight-item.insight-info .insight-badge {
    background: rgba(var(--info-rgb, 66, 153, 225), 0.18);
    color: var(--info-color, #4299e1);
}

.analysis-insight-item .insight-text {
    font-size: 0.87rem;
    color: var(--text-primary, #0f172a);
}

.analysis-section-note {
    margin: 0.35rem 0 0;
    font-size: 0.8rem;
    color: var(--text-secondary, #475569);
}

.analysis-table-wrapper {
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-color, #e2e8f0);
    border-radius: 12px;
    padding: 1rem 1rem 0.85rem;
    margin-bottom: 1rem;
    box-shadow: var(--shadow-xs, 0 2px 8px rgba(15, 23, 42, 0.05));
}

body.dark-mode .analysis-table-wrapper {
    background: var(--surface-base, #2f3540);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 8px 24px rgba(8, 12, 20, 0.35);
}

.analysis-table-wrapper:last-child {
    margin-bottom: 0;
}

.analysis-table-header h6 {
    margin: 0;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary, #0f172a);
}

body.dark-mode .analysis-table-header h6 {
    color: var(--text-primary, #f7fafc);
}

.analysis-table-responsive table {
    margin-bottom: 0;
}

body.dark-mode .analysis-table-responsive table {
    color: var(--text-primary, #f7fafc);
}

body.dark-mode .analysis-table-responsive table thead th {
    background: linear-gradient(135deg, rgba(var(--primary-rgb, 99, 179, 237), 0.28), rgba(255, 255, 255, 0.04));
    color: var(--text-primary, #f7fafc);
    border-color: rgba(255, 255, 255, 0.12);
}

body.dark-mode .analysis-table-responsive table tbody tr:nth-child(odd) {
    background-color: rgba(255, 255, 255, 0.02);
}

body.dark-mode .analysis-table-responsive table tbody tr:nth-child(even) {
    background-color: rgba(255, 255, 255, 0.05);
}

body.dark-mode .analysis-table-responsive table tbody tr:hover {
    background-color: rgba(var(--primary-rgb, 99, 179, 237), 0.18);
}

.analysis-charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1.25rem;
}

.analysis-chart {
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-color, #e2e8f0);
    border-radius: 14px;
    padding: 1rem;
    box-shadow: var(--shadow-xs, 0 2px 10px rgba(15, 23, 42, 0.06));
    position: relative;
    overflow: hidden;
}

.analysis-chart-image {
    width: 100%;
    border-radius: 12px;
    box-shadow: var(--shadow-md, 0 10px 25px rgba(15, 23, 42, 0.12));
    transition: transform 0.2s ease;
}

.analysis-chart-image[data-chart-expand-trigger] {
    cursor: zoom-in;
}

.analysis-chart-image[data-chart-expand-trigger]:hover {
    transform: scale(1.01);
}

.chart-expand-button {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    padding: 0.25rem 0.6rem;
    border-radius: 999px;
    border: none;
    background: rgba(var(--primary-rgb, 66, 153, 225), 0.9);
    color: var(--text-inverse, #ffffff);
    font-size: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    box-shadow: var(--shadow-sm, 0 1px 3px rgba(15, 23, 42, 0.2));
    transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
    z-index: 1;
}

.chart-expand-button:hover,
.chart-expand-button:focus {
    outline: none;
    transform: translateY(-1px);
    background: rgba(var(--primary-rgb, 66, 153, 225), 1);
    box-shadow: var(--shadow-md, 0 4px 12px rgba(15, 23, 42, 0.18));
}

.chart-expand-button i {
    font-size: 0.9rem;
}

.analysis-chart figcaption {
    margin-top: 0.75rem;
    font-size: 0.82rem;
    color: var(--text-secondary, #475569);
}

.analysis-chart figcaption strong {
    display: block;
    font-size: 0.88rem;
    color: var(--text-primary, #0f172a);
    margin-bottom: 0.3rem;
}

.chart-expand-modal .modal-body {
    padding: 1.75rem;
}

.chart-expand-figure {
    margin: 0;
}

.chart-expand-image {
    width: 100%;
    border-radius: 16px;
    box-shadow: var(--shadow-lg, 0 20px 35px rgba(15, 23, 42, 0.25));
}

.chart-expand-description {
    margin-top: 1rem;
    font-size: 0.92rem;
    color: var(--text-secondary, #475569);
}

.chart-expand-modal {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 18px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-xl);
}

.chart-expand-modal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.24), rgba(var(--info-rgb), 0.16));
    border-bottom: 1px solid rgba(var(--primary-rgb), 0.18);
    color: var(--text-primary);
    align-items: center;
}

.chart-expand-modal .modal-header .modal-title {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    font-weight: 600;
}

.chart-expand-modal .modal-header .btn-close {
    opacity: 0.8;
}

.chart-expand-modal .modal-header .btn-close:hover {
    opacity: 1;
}

.chart-expand-modal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
}

.chart-expand-modal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

body.dark-mode .chart-expand-modal {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.65);
}

body.dark-mode .chart-expand-modal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.34), rgba(var(--info-rgb), 0.26));
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: var(--text-inverse);
}

body.dark-mode .chart-expand-modal .modal-header .btn-close {
    filter: invert(1) hue-rotate(180deg);
}

body.dark-mode .chart-expand-modal .modal-body {
    background: var(--bg-secondary);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode .chart-expand-modal .modal-footer {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.9);
    border-top-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode .chart-expand-image {
    box-shadow: 0 24px 44px rgba(15, 23, 42, 0.6);
}

body.dark-mode .chart-expand-description {
    color: rgba(226, 232, 240, 0.82);
}

/* Analysis Code Modal */
#analysisCodeModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 18px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-xl);
}

#analysisCodeModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.26), rgba(var(--info-rgb), 0.18));
    border-bottom: 1px solid rgba(var(--primary-rgb), 0.16);
    color: var(--text-inverse);
    align-items: center;
}

#analysisCodeModal .modal-header .modal-title {
    display: flex;
    align-items: center;
    gap: 0.55rem;
    font-weight: 600;
}

#analysisCodeModal .modal-header i {
    color: rgba(var(--info-rgb), 0.92);
}

#analysisCodeModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
}

#analysisCodeModal .analysis-code-block {
    background: var(--bg-secondary);
    border-radius: 14px;
    border: 1px solid var(--border-color);
    padding: 1.1rem;
}

#analysisCodeModal .analysis-code-block .code-block {
    background: rgba(var(--primary-rgb), 0.06);
    border-radius: 12px;
    padding: 1rem;
    color: var(--text-primary);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
}

#analysisCodeModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

#analysisCodeModal .btn-outline-secondary {
    color: rgba(var(--primary-rgb), 0.8);
    border-color: rgba(var(--primary-rgb), 0.24);
}

#analysisCodeModal .btn-outline-secondary:hover,
#analysisCodeModal .btn-outline-secondary:focus {
    color: var(--text-inverse);
    background: rgba(var(--primary-rgb), 0.85);
    border-color: rgba(var(--primary-rgb), 0.95);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.28);
}

#analysisCodeModal .alert {
    border-radius: 12px;
    border: 1px solid rgba(var(--info-rgb), 0.3);
    background: rgba(var(--info-rgb), 0.12);
    color: var(--text-primary);
}

body.dark-mode #analysisCodeModal .modal-content {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 22px 44px rgba(0, 0, 0, 0.7);
}

body.dark-mode #analysisCodeModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.34), rgba(var(--info-rgb), 0.26));
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: var(--text-inverse);
}

body.dark-mode #analysisCodeModal .modal-body {
    background: var(--bg-secondary);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #analysisCodeModal .analysis-code-block {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.95);
    border-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #analysisCodeModal .analysis-code-block .code-block {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.92);
    color: rgba(226, 232, 240, 0.97);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.4);
}

body.dark-mode #analysisCodeModal .alert {
    background: rgba(var(--info-rgb), 0.28);
    border-color: rgba(var(--info-rgb), 0.4);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #analysisCodeModal .btn-outline-secondary {
    color: rgba(226, 232, 240, 0.9);
    border-color: rgba(255, 255, 255, 0.18);
}

body.dark-mode #analysisCodeModal .btn-outline-secondary:hover,
body.dark-mode #analysisCodeModal .btn-outline-secondary:focus {
    color: var(--text-inverse);
    background: rgba(var(--primary-rgb), 0.85);
    border-color: rgba(var(--primary-rgb), 0.95);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.32);
}

.floating-clear-results-btn {
    position: fixed;
    bottom: 2.5rem;
    right: 2.5rem;
    width: 3.5rem;
    height: 3.5rem;
    border-radius: 50%;
    border: none;
    background: var(--danger-color, #f56565);
    color: var(--text-inverse, #ffffff);
    box-shadow: var(--shadow-lg, 0 10px 25px rgba(15, 23, 42, 0.25));
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 1.35rem;
    z-index: 1050;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}

.floating-clear-results-btn:hover,
.floating-clear-results-btn:focus {
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--shadow-xl, 0 16px 35px rgba(15, 23, 42, 0.3));
    background: var(--danger-color, #f56565);
    outline: none;
}

.floating-clear-results-btn:active {
    transform: scale(0.96);
}

body.dark-mode .floating-clear-results-btn {
    background: rgba(244, 114, 182, 0.95);
    color: #0f172a;
}

@media (max-width: 768px) {
    .floating-clear-results-btn {
        bottom: 1.5rem;
        right: 1.5rem;
        width: 3rem;
        height: 3rem;
        font-size: 1.1rem;
    }
}

.analysis-details-pre {
    background: #0f172a;
    color: #e2e8f0;
    border-radius: 12px;
    padding: 1rem 1.25rem;
    font-size: 0.85rem;
    max-height: 320px;
    overflow: auto;
    box-shadow: none;
}

.analysis-details-pre::-webkit-scrollbar {
    width: 8px;
}

.analysis-details-pre::-webkit-scrollbar-thumb {
    background: rgba(226, 232, 240, 0.4);
    border-radius: 8px;
}

@media (max-width: 768px) {
    .structured-section-header {
        flex-direction: column;
        align-items: flex-start;
    }

    .analysis-metrics-grid {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    }

    .analysis-charts-grid {
        grid-template-columns: 1fr;
    }
}

.analysis-result-card .code-section {
    border-top: 1px solid var(--border-color, #e2e8f0);
    background: var(--bg-secondary, #f8fafc);
    padding: 1rem 1.5rem 1.25rem;
}

.analysis-result-card .code-section .code-header {
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    font-weight: 600;
    font-size: 0.82rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary, #475569);
    margin-bottom: 0.75rem;
}

.analysis-result-card .code-section pre {
    margin: 0;
    font-size: 0.85rem;
    border-radius: 12px;
    background: #0f172a;
    color: #e2e8f0;
    padding: 1rem 1.25rem;
    overflow: auto;
    max-height: 360px;
}

.cell-type-indicator.markdown-cell {
    color: var(--info-color);
}

.cell-actions {
    display: flex;
    gap: 0.35rem;
    flex-wrap: wrap;
}

.cell-content {
    padding: 1rem 1.1rem 1.1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.cell-toolbar {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.notebook-cell:hover .cell-toolbar {
    opacity: 1;
}

.cell-input {
    padding: 1rem;
    border-radius: 10px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
}

.cell-output {
    padding: 1rem;
    border-radius: 10px;
    background: var(--bg-primary);
    border: 1px dashed rgba(var(--success-rgb), 0.35);
}

.cell-execution-count,
.execution-counter {
    font-size: 0.75rem;
    color: var(--text-secondary);
    font-weight: 600;
}

.code-editor,
.markdown-editor {
    width: 100%;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 0.85rem 1rem;
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-family: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;
    font-size: 0.9rem;
    line-height: 1.5;
    min-height: 120px;
    resize: vertical;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.code-editor:focus,
.markdown-editor:focus {
    outline: none;
    border-color: rgba(var(--primary-rgb), 0.6);
    box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.12);
}

.markdown-editor-min-height {
    min-height: 180px;
}

.markdown-preview {
    padding: 1rem;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 120px;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3 {
    color: var(--text-primary);
    margin-bottom: 0.85rem;
}

.markdown-content p {
    margin-bottom: 0.75rem;
    line-height: 1.6;
}

.markdown-content ul {
    margin-bottom: 0.85rem;
    padding-left: 1.25rem;
}

.markdown-content li {
    margin-bottom: 0.4rem;
}

.code-section {
    border: 1px solid var(--border-color);
    border-radius: 12px;
    overflow: hidden;
}

.code-header {
    background: var(--bg-secondary);
    padding: 0.65rem 1rem;
    font-size: 0.78rem;
    font-weight: 600;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.code-content {
    padding: 1rem;
    background: var(--bg-primary);
    border-top: 1px solid var(--border-color);
}

.code-content pre {
    margin: 0;
    padding: 0;
    background: transparent;
    border: none;
    color: inherit;
    font-family: inherit;
}

.code-content code {
    background: transparent;
    color: inherit;
    padding: 0;
}

.output-area {
    background: var(--bg-secondary);
    border-radius: 10px;
    padding: 0.9rem 1rem;
    min-height: 60px;
    border: 1px solid var(--border-color);
}

.chart-container {
    background: var(--bg-primary);
    border-radius: 12px;
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    margin: 0.5rem 0;
}

.loading-indicator {
    padding: 1.25rem;
    text-align: center;
    color: var(--text-secondary);
}

.loading-indicator .loading-spinner {
    display: inline-block;
    width: 24px;
    height: 24px;
    border: 3px solid rgba(var(--primary-rgb), 0.2);
    border-top: 3px solid rgba(var(--primary-rgb), 0.8);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.notebook-container {
    max-width: 100%;
    margin: 0 auto;
    padding: 1.25rem;
    background: var(--card-background);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
}

/* Modern Interactive Analysis Grid Styles */
.analysis-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
}

.analysis-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 12px;
}

/* Enhanced Analysis category layout - Compact version with theme support */
.analysis-category {
    margin-bottom: 1rem;
    border-radius: 10px;
    background: var(--bg-primary);
    padding: 12px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-sm);
    transition: all 0.3s ease;
    color: var(--text-primary);
}

.analysis-category:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
    border-color: var(--primary-color);
}

/* Compact Category Title with theme support */
.analysis-category-title {
    font-size: 0.85rem;
    color: var(--text-primary);
    margin-bottom: 8px;
    padding-bottom: 6px;
    border-bottom: 2px solid var(--divider-color);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Compact Category Icon with theme support */
.analysis-category-title i {
    color: var(--text-inverse);
    background: var(--primary-gradient);
    padding: 6px;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-sm);
    font-size: 12px;
}

/* Compact Analysis Options Layout */
.analysis-options-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); /* Reduced from 140px */
    gap: 8px; /* Reduced from 12px */
    max-width: 100%;
}

/* Compact Analysis Option Cards with theme support */
.analysis-option {
    background: var(--bg-primary);
    border: 2px solid var(--border-color);
    border-radius: 10px;
    padding: 8px 6px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    min-height: 65px;
    justify-content: center;
    position: relative;
    overflow: hidden;
    box-shadow: var(--shadow-xs);
    color: var(--text-primary);
}

/* Compact Enhanced Hover Effects with theme support */
.analysis-option:hover {
    border-color: var(--primary-color);
    background: var(--hover-bg);
    transform: translateY(-2px) scale(1.01);
    box-shadow: var(--shadow-md);
    color: var(--primary-color);
}

/* Compact Selected State with theme support */
.analysis-option.selected {
    border-color: var(--success-color);
    background: linear-gradient(135deg, var(--success-color)15, var(--success-color)05);
    color: var(--success-color);
    transform: scale(1.03);
    box-shadow: var(--shadow-lg);
}

/* Compact Check Mark with theme support */
.analysis-option.selected::after {
    content: '✓';
    position: absolute;
    top: 3px;
    right: 5px;
    font-size: 12px;
    color: var(--success-color);
    font-weight: bold;
    background: var(--bg-primary);
    border-radius: 50%;
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-xs);
}

/* Compact Icon and Text Styling with theme support */
.analysis-option i {
    font-size: 16px;
    color: var(--text-secondary);
    transition: all 0.3s ease;
}

.analysis-option:hover i {
    color: var(--primary-color);
    transform: scale(1.05);
}

.analysis-option.selected i {
    color: var(--success-color);
    transform: scale(1.1);
}

/* Compact Text Styling with theme support */
.analysis-option span {
    font-size: 10px;
    font-weight: 500;
    line-height: 1.2;
    color: var(--text-primary);
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.analysis-option:hover span {
    color: var(--primary-color);
    font-weight: 600;
}

.analysis-option.selected span {
    color: var(--success-color);
    font-weight: 700;
}

.analysis-option.is-running {
    border-color: var(--primary-color);
    background: rgba(var(--primary-rgb, 66, 153, 225), 0.08);
    color: var(--primary-color);
    cursor: progress;
    box-shadow: var(--shadow-md);
}

.analysis-option.is-running::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: linear-gradient(135deg, rgba(var(--primary-rgb, 66, 153, 225), 0.15), rgba(var(--primary-rgb, 66, 153, 225), 0.25));
    opacity: 0.8;
    pointer-events: none;
}

.analysis-option.is-running i,
.analysis-option.is-running span {
    color: var(--primary-color);
}

/* Enhanced Selected Analysis Display */
.selected-analysis {
    background: linear-gradient(135deg, #e8f5e8 0%, #f0f9f0 100%);
    border: 2px solid #28a745;
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 18px;
    box-shadow: 0 4px 15px rgba(40, 167, 69, 0.15);
    transition: all 0.3s ease;
}

.selected-analysis:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(40, 167, 69, 0.2);
}

/* Enhanced Multi-Selection Styles */
.selected-analyses {
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    border: 2px solid #007bff;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 4px 15px rgba(0, 123, 255, 0.1);
    margin-bottom: 18px;
}

/* Modern Selected Badges */
.selected-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 12px;
}

.selected-badge {
    background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
}

.selected-badge:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
}

.selected-badge .remove-badge {
    cursor: pointer;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    transition: all 0.2s ease;
}

.selected-badge .remove-badge:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* Additional badge container styling */
.selected-badges .badge {
    display: inline-flex;
    align-items: center;
    padding: 4px 8px;
    font-size: 12px;
    font-weight: 500;
}

.selected-badges .btn-close {
    margin-left: 4px;
    padding: 0;
    width: 14px;
    height: 14px;
}

/* Modern Animation Effects */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Animation Classes */
.analysis-option.pulse {
    animation: pulse 0.6s ease-in-out;
}

.selected-badge {
    animation: slideIn 0.3s ease-out;
}

.analysis-category {
    animation: fadeInUp 0.5s ease-out;
}

/* Compact Enhanced Button Styles */
#addCellBtn {
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    border: none;
    border-radius: 8px; /* Reduced from 10px */
    padding: 8px 20px; /* Reduced from 12px 24px */
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px; /* Reduced from 0.5px */
    box-shadow: 0 3px 12px rgba(40, 167, 69, 0.25); /* Reduced shadow */
    transition: all 0.3s ease;
    font-size: 0.9rem; /* Added smaller font size */
}

#addCellBtn:hover {
    transform: translateY(-1px); /* Reduced from -2px */
    box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3); /* Reduced shadow */
    background: linear-gradient(135deg, #218838 0%, #1e7e34 100%);
}

#addCellBtn:disabled {
    background: #6c757d;
    box-shadow: none;
    transform: none;
}

/* Empty state for badges */
.selected-badges:empty::before {
    content: "No analyses selected";
    color: #6c757d;
    font-style: italic;
    font-size: 12px;
}

.selected-analysis-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.selected-info {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 500;
    color: #155724;
}

.selected-info i {
    font-size: 16px;
}

/* Domain Recommendations Modal */
#domainRecommendationsModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    box-shadow: var(--shadow-lg);
}

#domainRecommendationsModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--success-rgb), 0.28), rgba(var(--success-rgb), 0.12));
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-color);
    align-items: center;
}

#domainRecommendationsModal .modal-header .modal-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
}

#domainRecommendationsModal .modal-header .modal-title i {
    font-size: 1.05rem;
    color: var(--success-color);
}

#domainRecommendationsModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 1.75rem;
}

#domainRecommendationsModal .modal-body p {
    color: var(--text-secondary);
}

#domainRecommendationsModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

#domainRecommendationsModal .spinner-border {
    width: 2.5rem;
    height: 2.5rem;
    border-width: 0.25rem;
    border-color: rgba(var(--success-rgb), 0.25);
    border-top-color: rgba(var(--success-rgb), 0.85);
}

#domainRecommendationsModal .btn-secondary {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.2), rgba(var(--primary-rgb), 0.1));
    border-color: rgba(var(--primary-rgb), 0.25);
    color: var(--text-primary);
}

#domainRecommendationsModal .btn-secondary:hover,
#domainRecommendationsModal .btn-secondary:focus {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.35), rgba(var(--primary-rgb), 0.2));
    border-color: rgba(var(--primary-rgb), 0.35);
}

#domainRecommendationsModal .btn-close {
    opacity: 0.7;
}

#domainRecommendationsModal .btn-close:hover {
    opacity: 1;
}

/* Domain Recommendations Styles */
.recommendation-card {
    transition: all 0.2s ease;
    border: 1px solid var(--border-color);
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 14px;
}

.recommendation-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    border-color: rgba(var(--success-rgb), 0.45);
}

.recommendation-card .card-body {
    padding: 12px;
    display: flex;
    gap: 0.75rem;
}

.recommendation-card i {
    font-size: 1.1rem;
    min-width: 1.5rem;
    color: var(--success-color);
}

.recommendation-card h6 {
    color: var(--text-primary);
    font-weight: 600;
    font-size: 0.95rem;
}

.recommendation-card p,
.recommendation-card li,
.recommendation-card span,
.recommendation-card small {
    color: var(--text-secondary);
    line-height: 1.45;
}

body.dark-mode #domainRecommendationsModal .modal-content {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 18px 36px rgba(0, 0, 0, 0.6);
    color: var(--text-primary);
}

body.dark-mode #domainRecommendationsModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--success-rgb), 0.32), rgba(var(--success-rgb), 0.18));
    border-bottom-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #domainRecommendationsModal .modal-header .modal-title i {
    color: rgba(var(--success-rgb), 0.75);
}

body.dark-mode #domainRecommendationsModal .modal-body {
    background: var(--bg-secondary);
}

body.dark-mode #domainRecommendationsModal .modal-body p {
    color: rgba(226, 232, 240, 0.75);
}

/* Categorical Analysis Modal */
#categoricalAnalysisModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 16px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-lg);
}

#categoricalAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--info-rgb), 0.18), rgba(var(--info-rgb), 0.08));
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
    align-items: center;
}

#categoricalAnalysisModal .modal-header .modal-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
}

#categoricalAnalysisModal .modal-header .modal-title i {
    color: rgba(var(--info-rgb), 0.75);
}

#categoricalAnalysisModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 1.5rem;
}

#categoricalAnalysisModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

#categoricalRecommendationChips .btn {
    border-radius: 999px;
    padding-inline: 0.85rem;
}

#categoricalRecommendationChips .btn.active,
#categoricalRecommendationChips .btn:focus {
    background: var(--primary-color);
    color: var(--text-inverse);
    border-color: var(--primary-color);
    box-shadow: var(--shadow-sm);
}

#categoricalColumnList {
    border: 1px solid var(--border-color);
    border-radius: 12px;
    max-height: 320px;
    overflow-y: auto;
    background: var(--bg-primary);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.04);
}

#categoricalColumnList .list-group-item {
    background: transparent;
    color: var(--text-primary);
    border-color: var(--border-color);
    transition: background-color 0.2s ease, border-color 0.2s ease;
}

#categoricalColumnList .list-group-item strong {
    color: var(--text-primary);
}

#categoricalColumnList .list-group-item small {
    color: var(--text-secondary);
}

#categoricalColumnList .list-group-item:hover {
    background: rgba(var(--primary-rgb), 0.08);
}

#categoricalSelectionSummary {
    border-radius: 12px;
    border: 1px solid rgba(var(--info-rgb), 0.25);
    background: linear-gradient(135deg, rgba(var(--info-rgb), 0.1), rgba(var(--info-rgb), 0.04));
    color: var(--text-primary);
}

body.dark-mode #categoricalAnalysisModal .modal-content {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 18px 36px rgba(0, 0, 0, 0.65);
}

body.dark-mode #categoricalAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--info-rgb), 0.26), rgba(var(--info-rgb), 0.14));
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: var(--text-primary);
}

body.dark-mode #categoricalAnalysisModal .modal-header .modal-title i {
    color: rgba(var(--info-rgb), 0.85);
}

body.dark-mode #categoricalAnalysisModal .modal-body {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

body.dark-mode #categoricalAnalysisModal .modal-footer {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
    border-top-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #categoricalRecommendationChips .btn {
    border-color: rgba(var(--info-rgb), 0.5);
    color: rgba(226, 232, 240, 0.85);
    background: rgba(var(--surface-elevated-rgb, 54, 60, 73), 0.6);
}

body.dark-mode #categoricalRecommendationChips .btn.active,
body.dark-mode #categoricalRecommendationChips .btn:focus {
    background: rgba(var(--info-rgb), 0.85);
    color: var(--text-inverse);
    border-color: rgba(var(--info-rgb), 0.95);
    box-shadow: 0 0 0 0.2rem rgba(var(--info-rgb), 0.25);
}

/* Categorical vs Numeric Modal */
#categoricalNumericAnalysisModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 18px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-xl);
}

#categoricalNumericAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.2), rgba(var(--info-rgb), 0.14));
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
    align-items: center;
    padding-block: 1rem;
}

#categoricalNumericAnalysisModal .modal-header .modal-title {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-weight: 600;
}

#categoricalNumericAnalysisModal .modal-header .modal-title i {
    color: rgba(var(--info-rgb), 0.85);
    font-size: 1.4rem;
}

#categoricalNumericAnalysisModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 1.75rem;
}

#categoricalNumericAnalysisModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
    padding-block: 1rem;
}

#categoricalNumericAnalysisModal .categorical-numeric-toolbar .btn {
    min-width: 11rem;
}

#categoricalNumericAnalysisModal .categorical-numeric-recommendations {
    border: 1px solid rgba(var(--primary-rgb), 0.12);
    border-radius: 14px;
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.06), rgba(var(--info-rgb), 0.05));
    box-shadow: var(--shadow-sm);
}

#categoricalNumericAnalysisModal .categorical-numeric-card {
    border: 1px solid var(--border-color);
    border-radius: 14px;
    box-shadow: var(--shadow-sm);
}

#categoricalNumericAnalysisModal .categorical-numeric-card .card-header {
    background: rgba(var(--primary-rgb), 0.04);
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
    font-weight: 600;
}

#categoricalNumericAnalysisModal .categorical-numeric-card .card-header i {
    color: rgba(var(--primary-rgb), 0.65);
}

#categoricalNumericAnalysisModal .categorical-numeric-card .card-body {
    background: var(--bg-primary);
    color: var(--text-primary);
}

#categoricalNumericAnalysisModal .categorical-numeric-list {
    border: 1px solid var(--border-color);
    border-radius: 12px;
    background: var(--bg-primary);
    max-height: 320px;
    overflow-y: auto;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.04);
}

#categoricalNumericAnalysisModal .categorical-numeric-list .list-group-item {
    background: transparent;
    color: var(--text-primary);
    border-color: var(--border-color);
    transition: background-color 0.2s ease, border-color 0.2s ease;
}

#categoricalNumericAnalysisModal .categorical-numeric-list .list-group-item strong {
    color: var(--text-primary);
}

#categoricalNumericAnalysisModal .categorical-numeric-list .list-group-item small {
    color: var(--text-secondary);
}

#categoricalNumericAnalysisModal .categorical-numeric-list .list-group-item:hover {
    background: rgba(var(--primary-rgb), 0.08);
    border-color: rgba(var(--primary-rgb), 0.35);
}

#categoricalNumericAnalysisModal #categoricalNumericRecommendationChips .recommendation-chip {
    border-radius: 999px;
    border-color: rgba(var(--primary-rgb), 0.4);
    color: rgba(var(--primary-rgb), 0.82);
    background: rgba(var(--info-rgb), 0.12);
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

#categoricalNumericAnalysisModal #categoricalNumericRecommendationChips .recommendation-chip:hover,
#categoricalNumericAnalysisModal #categoricalNumericRecommendationChips .recommendation-chip:focus,
#categoricalNumericAnalysisModal #categoricalNumericRecommendationChips .recommendation-chip.active {
    background: rgba(var(--primary-rgb), 0.95);
    color: var(--text-inverse);
    transform: translateY(-1px);
    box-shadow: 0 6px 12px rgba(var(--primary-rgb), 0.18);
}

#categoricalNumericSelectionSummary {
    border-radius: 14px;
    border: 1px solid rgba(var(--primary-rgb), 0.2);
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.1), rgba(var(--info-rgb), 0.06));
    color: var(--text-primary);
    padding: 1rem 1.25rem;
    box-shadow: var(--shadow-xs);
}

body.dark-mode #categoricalNumericAnalysisModal .modal-content {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0 22px 44px rgba(0, 0, 0, 0.65);
}

/* Target Analysis Modal */
#targetAnalysisModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 18px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-xl);
}

#targetAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.2), rgba(var(--info-rgb), 0.16));
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
    align-items: center;
    padding-block: 1rem;
}

#targetAnalysisModal .modal-header .modal-title {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-weight: 600;
}

#targetAnalysisModal .modal-header .modal-title i {
    color: rgba(var(--info-rgb), 0.9);
    font-size: 1.4rem;
}

#targetAnalysisModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 1.75rem;
}

#targetAnalysisModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
    padding-block: 1rem;
}

#targetAnalysisModal .target-modal-toolbar .btn {
    min-width: 9.5rem;
}

#targetAnalysisModal .target-search-group {
    max-width: 320px;
}

#targetAnalysisModal .target-columns-card {
    border: 1px solid rgba(var(--primary-rgb), 0.16);
    border-radius: 16px;
    box-shadow: var(--shadow-sm);
}

#targetAnalysisModal .target-columns-card .card-header {
    background: rgba(var(--primary-rgb), 0.05);
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
    font-weight: 600;
}

#targetAnalysisModal .target-columns-card .card-header i {
    color: rgba(var(--primary-rgb), 0.65);
}

#targetAnalysisModal .target-columns-card .card-header .badge {
    background: rgba(var(--info-rgb), 0.16);
    color: rgba(var(--primary-rgb), 0.85);
    border: 1px solid rgba(var(--info-rgb), 0.3);
}

#targetAnalysisModal .target-column-list {
    border: 1px solid var(--border-color);
    border-radius: 14px;
    background: var(--bg-primary);
    max-height: 340px;
    overflow-y: auto;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
}

#targetAnalysisModal .target-column-item {
    background: transparent;
    color: var(--text-primary);
    border-color: var(--border-color);
    transition: background-color 0.2s ease, border-color 0.2s ease;
    border-radius: 12px;
    margin: 0.25rem;
}

#targetAnalysisModal .target-column-item:hover,
#targetAnalysisModal .target-column-item:focus-within {
    background: rgba(var(--primary-rgb), 0.08);
    border-color: rgba(var(--primary-rgb), 0.35);
}

#targetAnalysisModal .target-column-item strong {
    color: var(--text-primary);
}

#targetAnalysisModal .target-column-item .badge {
    font-weight: 500;
}

#targetAnalysisModal .target-selection-meta {
    color: var(--text-secondary);
}

#targetAnalysisModal .target-column-item input.form-check-input {
    width: 1.1rem;
    height: 1.1rem;
    margin-top: 0.2rem;
}

#targetAnalysisModal #targetRecommendationChips .btn {
    border-radius: 999px;
    border-color: rgba(var(--primary-rgb), 0.38);
    color: rgba(var(--primary-rgb), 0.85);
    background: rgba(var(--primary-rgb), 0.08);
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

#targetAnalysisModal #targetRecommendationChips .btn:hover,
#targetAnalysisModal #targetRecommendationChips .btn:focus {
    background: rgba(var(--primary-rgb), 0.95);
    color: var(--text-inverse);
    transform: translateY(-1px);
    box-shadow: 0 6px 12px rgba(var(--primary-rgb), 0.2);
}

#targetSelectionSummary {
    border-radius: 14px;
    border: 1px solid rgba(var(--primary-rgb), 0.2);
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.12), rgba(var(--info-rgb), 0.08));
    color: var(--text-primary);
    padding: 1rem 1.25rem;
    box-shadow: var(--shadow-xs);
}

body.dark-mode #targetAnalysisModal .modal-content {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 22px 44px rgba(0, 0, 0, 0.7);
}

body.dark-mode #targetAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.34), rgba(var(--info-rgb), 0.26));
    border-bottom-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #targetAnalysisModal .target-columns-card {
    border-color: rgba(255, 255, 255, 0.08);
    background: rgba(255, 255, 255, 0.02);
}

body.dark-mode #targetAnalysisModal .target-columns-card .card-header {
    background: rgba(255, 255, 255, 0.03);
    border-bottom-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #targetAnalysisModal .target-column-list {
    border-color: rgba(255, 255, 255, 0.08);
    background: rgba(255, 255, 255, 0.02);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
}

body.dark-mode #targetAnalysisModal .target-column-item {
    border-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #targetAnalysisModal .target-column-item:hover,
body.dark-mode #targetAnalysisModal .target-column-item:focus-within {
    background: rgba(var(--primary-rgb), 0.2);
    border-color: rgba(var(--primary-rgb), 0.55);
}

body.dark-mode #targetAnalysisModal #targetRecommendationChips .btn {
    border-color: rgba(var(--info-rgb), 0.55);
    color: rgba(var(--info-rgb), 0.9);
    background: rgba(var(--info-rgb), 0.18);
}

body.dark-mode #targetAnalysisModal #targetRecommendationChips .btn:hover,
body.dark-mode #targetAnalysisModal #targetRecommendationChips .btn:focus {
    background: rgba(var(--info-rgb), 0.95);
    color: var(--text-inverse);
}

body.dark-mode #targetSelectionSummary {
    border-color: rgba(var(--info-rgb), 0.55);
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.28), rgba(var(--info-rgb), 0.24));
    color: var(--text-inverse);
}

/* Numeric Analysis Modal */
#numericAnalysisModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 18px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-xl);
}

#numericAnalysisModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
}

#numericAnalysisModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

#numericAnalysisModal .list-group {
    border: 1px solid var(--border-color);
    border-radius: 14px;
    background: var(--bg-secondary);
    max-height: 320px;
    overflow-y: auto;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.06);
}

#numericAnalysisModal .list-group-item {
    background: transparent;
    color: var(--text-primary);
    border-color: var(--border-color);
    transition: background-color 0.2s ease, border-color 0.2s ease;
    border-radius: 12px;
    margin: 0.25rem;
}

#numericAnalysisModal .list-group-item:hover,
#numericAnalysisModal .list-group-item:focus-within {
    background: rgba(var(--primary-rgb), 0.08);
    border-color: rgba(var(--primary-rgb), 0.32);
}

#numericAnalysisModal .form-control,
#numericAnalysisModal .form-select {
    background: var(--bg-primary);
    border: 1px solid rgba(var(--primary-rgb), 0.24);
    color: var(--text-primary);
    border-radius: 12px;
    box-shadow: none;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

#numericAnalysisModal .form-control:focus,
#numericAnalysisModal .form-select:focus {
    border-color: rgba(var(--primary-rgb), 0.55);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.18);
}

#numericAnalysisModal .input-group-text {
    background: rgba(var(--primary-rgb), 0.08);
    border: 1px solid rgba(var(--primary-rgb), 0.22);
    color: rgba(var(--primary-rgb), 0.85);
}

#numericAnalysisModal .alert {
    border-radius: 14px;
    border: 1px solid rgba(var(--primary-rgb), 0.25);
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.12), rgba(var(--info-rgb), 0.08));
    color: var(--text-primary);
}

body.dark-mode #numericAnalysisModal .modal-content {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 22px 44px rgba(0, 0, 0, 0.7);
}

body.dark-mode #numericAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.36), rgba(var(--info-rgb), 0.24));
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: var(--text-inverse);
}

body.dark-mode #numericAnalysisModal .modal-header .btn-close {
    filter: invert(1) hue-rotate(180deg);
}

body.dark-mode #numericAnalysisModal .modal-body {
    background: var(--bg-secondary);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #numericAnalysisModal .modal-footer {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
    border-top-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #numericAnalysisModal .list-group {
    border-color: rgba(255, 255, 255, 0.1);
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.85);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
}

body.dark-mode #numericAnalysisModal .list-group-item {
    border-color: rgba(255, 255, 255, 0.08);
    color: rgba(226, 232, 240, 0.92);
}

body.dark-mode #numericAnalysisModal .list-group-item:hover,
body.dark-mode #numericAnalysisModal .list-group-item:focus-within {
    background: rgba(var(--primary-rgb), 0.22);
    border-color: rgba(var(--primary-rgb), 0.45);
}

body.dark-mode #numericAnalysisModal .form-control,
body.dark-mode #numericAnalysisModal .form-select {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.82);
    border-color: rgba(255, 255, 255, 0.16);
    color: rgba(226, 232, 240, 0.94);
}

body.dark-mode #numericAnalysisModal .form-control:focus,
body.dark-mode #numericAnalysisModal .form-select:focus {
    border-color: rgba(var(--primary-rgb), 0.65);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.28);
}

body.dark-mode #numericAnalysisModal .input-group-text {
    background: rgba(148, 163, 184, 0.2);
    border-color: rgba(255, 255, 255, 0.12);
    color: rgba(226, 232, 240, 0.88);
}

body.dark-mode #numericAnalysisModal .alert {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.32), rgba(var(--info-rgb), 0.26));
    border-color: rgba(var(--primary-rgb), 0.45);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #numericAnalysisModal .text-muted {
    color: rgba(200, 213, 225, 0.82) !important;
}

body.dark-mode #numericAnalysisModal .btn-outline-success,
body.dark-mode #numericAnalysisModal .btn-outline-secondary,
body.dark-mode #numericAnalysisModal .btn-outline-primary {
    color: rgba(226, 232, 240, 0.9);
    border-color: rgba(255, 255, 255, 0.18);
}

body.dark-mode #numericAnalysisModal .btn-outline-success:hover,
body.dark-mode #numericAnalysisModal .btn-outline-success:focus {
    color: var(--text-inverse);
    background: rgba(var(--success-rgb), 0.28);
    border-color: rgba(var(--success-rgb), 0.5);
    box-shadow: 0 0 0 0.2rem rgba(var(--success-rgb), 0.3);
}

body.dark-mode #numericAnalysisModal .btn-outline-primary:hover,
body.dark-mode #numericAnalysisModal .btn-outline-primary:focus {
    color: var(--text-inverse);
    background: rgba(var(--primary-rgb), 0.85);
    border-color: rgba(var(--primary-rgb), 0.95);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.32);
}

body.dark-mode #numericAnalysisModal .btn-outline-secondary:hover,
body.dark-mode #numericAnalysisModal .btn-outline-secondary:focus {
    color: var(--text-inverse);
    background: rgba(148, 163, 184, 0.35);
    border-color: rgba(148, 163, 184, 0.5);
    box-shadow: 0 0 0 0.2rem rgba(148, 163, 184, 0.28);
}

/* Geospatial Analysis Modal */
#geospatialAnalysisModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 18px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-xl);
}

#geospatialAnalysisModal .modal-header {
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
    align-items: center;
    padding-block: 1rem;
}

#geospatialAnalysisModal .modal-header .modal-title {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-weight: 600;
}

#geospatialAnalysisModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
}

#geospatialAnalysisModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

#geospatialOptionalModeGroup {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding: 1rem 1.25rem;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 14px;
    box-shadow: var(--shadow-sm);
}

#geospatialOptionalModeGroup label.form-label {
    margin-bottom: 0;
    color: var(--text-primary);
}

#geospatialOptionalModeGroup .btn-group {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

#geospatialOptionalModeGroup .btn-group .btn {
    border-radius: 999px;
    font-weight: 600;
    padding: 0.45rem 0.85rem;
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
}

#geospatialOptionalModeGroup .btn-group .btn:hover {
    background: rgba(var(--primary-rgb), 0.08);
    border-color: rgba(var(--primary-rgb), 0.3);
}

#geospatialOptionalModeGroup .btn-check:checked + .btn,
#geospatialOptionalModeGroup .btn-check:focus + .btn {
    color: var(--text-inverse);
    background: var(--btn-eda-gradient);
    border-color: transparent;
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.24);
}

#geospatialOptionalModeGroup .form-text {
    margin: 0;
    color: var(--text-secondary);
}

#geospatialAnalysisModal .card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    box-shadow: var(--shadow-sm);
}

#geospatialAnalysisModal .card + .card {
    margin-top: 1rem;
}

#geospatialAnalysisModal .card-header {
    border-bottom: 1px solid var(--border-color);
    background: transparent;
    color: var(--text-primary);
}

#geospatialAnalysisModal .card-header.bg-light {
    background: var(--bg-secondary) !important;
    color: var(--text-primary);
}

#geospatialAnalysisModal .card-body {
    background: var(--bg-primary);
    color: var(--text-primary);
}

#geospatialAnalysisModal .form-label {
    font-weight: 600;
    color: var(--text-primary);
}

#geospatialAnalysisModal .form-control,
#geospatialAnalysisModal .form-select {
    background: var(--bg-primary);
    border: 1px solid rgba(var(--primary-rgb), 0.24);
    color: var(--text-primary);
    border-radius: 12px;
    box-shadow: none;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}

#geospatialAnalysisModal .form-control::placeholder,
#geospatialAnalysisModal .form-select::placeholder {
    color: var(--text-secondary);
    opacity: 0.85;
}

#geospatialAnalysisModal .form-control:focus,
#geospatialAnalysisModal .form-select:focus {
    border-color: rgba(var(--primary-rgb), 0.55);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.18);
    background: var(--bg-primary);
}

#geospatialAnalysisModal .form-text {
    color: var(--text-secondary);
}

#geospatialAnalysisModal .alert {
    border-radius: 14px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    color: var(--text-primary);
    box-shadow: var(--shadow-xs);
}

#geospatialAnalysisModal .alert.alert-success {
    border-color: rgba(var(--success-rgb), 0.45);
    background: rgba(var(--success-rgb), 0.12);
}

#geospatialAnalysisModal .alert.alert-warning {
    border-color: rgba(var(--warning-rgb), 0.5);
    background: rgba(var(--warning-rgb), 0.16);
}

#geospatialAnalysisModal .alert.alert-secondary {
    border-color: var(--border-color);
    background: var(--bg-secondary);
}

body.dark-mode #geospatialAnalysisModal .modal-content {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 22px 44px rgba(0, 0, 0, 0.75);
}

body.dark-mode #geospatialAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.32), rgba(var(--info-rgb), 0.22));
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: var(--text-inverse);
}

body.dark-mode #geospatialAnalysisModal .modal-header .btn-close {
    filter: invert(1) hue-rotate(180deg);
}

body.dark-mode #geospatialAnalysisModal .modal-body {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.95);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #geospatialAnalysisModal .modal-footer {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.92);
    border-top-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #geospatialOptionalModeGroup {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.85);
    border-color: rgba(255, 255, 255, 0.12);
    box-shadow: 0 16px 28px rgba(10, 14, 20, 0.55);
}

body.dark-mode #geospatialOptionalModeGroup label {
    color: rgba(226, 232, 240, 0.92);
}

body.dark-mode #geospatialOptionalModeGroup .btn-group .btn {
    color: rgba(226, 232, 240, 0.85);
    border-color: rgba(226, 232, 240, 0.25);
}

body.dark-mode #geospatialOptionalModeGroup .btn-group .btn:hover {
    background: rgba(var(--primary-rgb), 0.18);
    border-color: rgba(var(--primary-rgb), 0.45);
    color: var(--text-inverse);
}

body.dark-mode #geospatialOptionalModeGroup .btn-check:checked + .btn,
body.dark-mode #geospatialOptionalModeGroup .btn-check:focus + .btn {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.85), rgba(var(--info-rgb), 0.6));
    border-color: transparent;
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.32);
    color: var(--text-inverse);
}

body.dark-mode #geospatialOptionalModeGroup .form-text {
    color: rgba(200, 213, 225, 0.75);
}

body.dark-mode #geospatialAnalysisModal .card {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.85);
    border-color: rgba(255, 255, 255, 0.12);
    box-shadow: 0 16px 30px rgba(10, 14, 20, 0.55);
}

body.dark-mode #geospatialAnalysisModal .card-header {
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: rgba(226, 232, 240, 0.92);
}

body.dark-mode #geospatialAnalysisModal .card-header.bg-light {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.92) !important;
}

body.dark-mode #geospatialAnalysisModal .card-body {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #geospatialAnalysisModal .form-control,
body.dark-mode #geospatialAnalysisModal .form-select {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.82);
    border-color: rgba(255, 255, 255, 0.16);
    color: rgba(226, 232, 240, 0.94);
}

body.dark-mode #geospatialAnalysisModal .form-control::placeholder,
body.dark-mode #geospatialAnalysisModal .form-select::placeholder {
    color: rgba(226, 232, 240, 0.65);
}

body.dark-mode #geospatialAnalysisModal .form-control:focus,
body.dark-mode #geospatialAnalysisModal .form-select:focus {
    border-color: rgba(var(--primary-rgb), 0.65);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.28);
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.95);
}

body.dark-mode #geospatialAnalysisModal .form-text {
    color: rgba(200, 213, 225, 0.78);
}

body.dark-mode #geospatialAnalysisModal .alert {
    border-color: rgba(255, 255, 255, 0.12);
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.88);
    color: rgba(226, 232, 240, 0.93);
}

body.dark-mode #geospatialAnalysisModal .alert.alert-success {
    border-color: rgba(var(--success-rgb), 0.45);
    background: linear-gradient(135deg, rgba(var(--success-rgb), 0.38), rgba(var(--info-rgb), 0.24));
}

body.dark-mode #geospatialAnalysisModal .alert.alert-warning {
    border-color: rgba(var(--warning-rgb), 0.5);
    background: linear-gradient(135deg, rgba(var(--warning-rgb), 0.36), rgba(var(--danger-rgb), 0.18));
}

body.dark-mode #geospatialAnalysisModal .alert.alert-secondary {
    border-color: rgba(255, 255, 255, 0.12);
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
    color: rgba(226, 232, 240, 0.88);
}

body.dark-mode #geospatialAnalysisModal .card table {
    color: rgba(226, 232, 240, 0.95);
    border-color: rgba(255, 255, 255, 0.12);
    background-color: transparent;
}

body.dark-mode #geospatialAnalysisModal .card table thead th {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.28), rgba(255, 255, 255, 0.05));
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #geospatialAnalysisModal .card table tbody tr {
    background-color: rgba(255, 255, 255, 0.04);
}

body.dark-mode #geospatialAnalysisModal .card table tbody tr:nth-child(even) {
    background-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #geospatialAnalysisModal .card table tbody tr:hover {
    background-color: rgba(var(--primary-rgb), 0.18);
}

body.dark-mode .table {
    color: rgba(226, 232, 240, 0.95);
    background-color: rgba(var(--surface-base-rgb, 47, 53, 64), 0.86);
    border-color: rgba(255, 255, 255, 0.12);
}

body.dark-mode .table > :not(caption) > * > * {
    background-color: transparent;
    border-bottom-color: rgba(255, 255, 255, 0.12);
    color: rgba(226, 232, 240, 0.92);
}

body.dark-mode .table thead th {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.24), rgba(255, 255, 255, 0.05));
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode .table-striped > tbody > tr:nth-of-type(odd) {
    background-color: rgba(255, 255, 255, 0.04);
}

body.dark-mode .table-striped > tbody > tr:nth-of-type(even) {
    background-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode .table-hover > tbody > tr:hover {
    color: rgba(226, 232, 240, 0.98);
    background-color: rgba(var(--primary-rgb), 0.22);
}

body.dark-mode .table-sm > :not(caption) > * > * {
    padding: 0.35rem 0.6rem;
}

/* Marketing Analysis Modal */
#marketingAnalysisModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 18px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-xl);
}

#marketingAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.26), rgba(var(--success-rgb), 0.18)) !important;
    border-bottom: 1px solid var(--border-color);
    color: var(--text-inverse) !important;
    align-items: center;
    padding-block: 1rem;
}

#marketingAnalysisModal .modal-header .modal-title {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-weight: 600;
}

#marketingAnalysisModal .modal-header .modal-title i {
    color: rgba(var(--success-rgb), 0.9);
    font-size: 1.35rem;
}

#marketingAnalysisModal .modal-header .btn-close {
    filter: invert(1) hue-rotate(180deg);
    opacity: 0.85;
}

#marketingAnalysisModal .modal-header .btn-close:hover {
    opacity: 1;
}

#marketingAnalysisModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 1.75rem;
}

#marketingAnalysisModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

#marketingAnalysisModal .card {
    border: 1px solid var(--border-color);
    border-radius: 16px;
    background: var(--bg-secondary);
    box-shadow: var(--shadow-sm);
}

#marketingAnalysisModal .card + .card {
    margin-top: 1.25rem;
}

#marketingAnalysisModal .card-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.12), rgba(var(--success-rgb), 0.08)) !important;
    border-bottom: 1px solid rgba(var(--primary-rgb), 0.18);
    color: var(--text-primary) !important;
    display: flex;
    align-items: center;
    gap: 0.55rem;
    font-weight: 600;
}

#marketingAnalysisModal .card-header small {
    color: var(--text-secondary);
}

#marketingAnalysisModal .card-header .btn {
    border-radius: 10px;
}

#marketingAnalysisModal .card-body {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

#marketingAnalysisModal .table thead {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.16), rgba(var(--info-rgb), 0.12));
    color: var(--text-primary);
}

#marketingAnalysisModal .table tbody tr:nth-of-type(odd) {
    background: rgba(var(--primary-rgb), 0.05);
}

#marketingAnalysisModal .table tbody tr:nth-of-type(even) {
    background: rgba(var(--primary-rgb), 0.02);
}

#marketingAnalysisModal .badge {
    letter-spacing: 0.01em;
}

#marketingAnalysisModal .badge.bg-primary {
    background: rgba(var(--primary-rgb), 0.18) !important;
    color: rgba(var(--primary-rgb), 0.92) !important;
}

#marketingAnalysisModal .badge.bg-success {
    background: rgba(var(--success-rgb), 0.2) !important;
    color: rgba(var(--success-rgb), 0.92) !important;
}

#marketingAnalysisModal .badge.bg-warning {
    background: rgba(var(--warning-rgb), 0.22) !important;
    color: #8b5d00 !important;
}

#marketingAnalysisModal .badge.bg-info {
    background: rgba(var(--info-rgb), 0.2) !important;
    color: rgba(var(--info-rgb), 0.92) !important;
}

#marketingAnalysisModal .list-group {
    border: 1px solid rgba(var(--primary-rgb), 0.18);
    border-radius: 14px;
    background: var(--bg-primary);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
}

#marketingAnalysisModal .list-group-item {
    background: transparent;
    border-color: rgba(var(--primary-rgb), 0.15);
    color: var(--text-primary);
    transition: background-color 0.2s ease, border-color 0.2s ease;
}

#marketingAnalysisModal .list-group-item:hover,
#marketingAnalysisModal .list-group-item:focus {
    background: rgba(var(--primary-rgb), 0.08);
    border-color: rgba(var(--primary-rgb), 0.28);
}

#marketingAnalysisModal .form-control,
#marketingAnalysisModal .form-select {
    background: var(--bg-primary);
    border: 1px solid rgba(var(--primary-rgb), 0.25);
    color: var(--text-primary);
    border-radius: 12px;
    box-shadow: none;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

#marketingAnalysisModal .form-control:focus,
#marketingAnalysisModal .form-select:focus {
    border-color: rgba(var(--primary-rgb), 0.55);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.18);
}

#marketingAnalysisModal .form-control::placeholder {
    color: rgba(var(--text-secondary-rgb, 110, 120, 140), 0.7);
}

#marketingAnalysisModal .input-group-text {
    background: rgba(var(--primary-rgb), 0.08);
    border: 1px solid rgba(var(--primary-rgb), 0.22);
    color: rgba(var(--text-secondary-rgb, 110, 120, 140), 0.85);
}

#marketingAnalysisModal .btn-outline-dark {
    color: rgba(var(--primary-rgb), 0.82);
    border-color: rgba(var(--primary-rgb), 0.22);
}

#marketingAnalysisModal .btn-outline-dark:hover,
#marketingAnalysisModal .btn-outline-dark:focus {
    color: var(--text-inverse);
    background: rgba(var(--primary-rgb), 0.88);
    border-color: rgba(var(--primary-rgb), 0.92);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.26);
}

#marketingAnalysisModal .card-header.bg-warning {
    background: linear-gradient(135deg, rgba(var(--warning-rgb), 0.22), rgba(var(--primary-rgb), 0.12)) !important;
    color: rgba(68, 52, 0, 0.95) !important;
}

#marketingAnalysisModal .card-header.bg-info {
    background: linear-gradient(135deg, rgba(var(--info-rgb), 0.18), rgba(var(--primary-rgb), 0.1)) !important;
    color: rgba(18, 43, 78, 0.95) !important;
}

#marketingAnalysisModal .hidden-section {
    border-radius: 16px;
    border: 1px dashed rgba(var(--primary-rgb), 0.32);
    background: rgba(var(--primary-rgb), 0.06);
    padding: 1.15rem 1.25rem;
}

#marketingAnalysisModal .hidden-section h6 {
    color: rgba(var(--primary-rgb), 0.88);
    font-weight: 600;
}

#marketingAnalysisModal .summary-tag {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.35rem 0.75rem;
    border-radius: 999px;
    background: rgba(var(--primary-rgb), 0.08);
    color: rgba(var(--primary-rgb), 0.9);
    border: 1px solid rgba(var(--primary-rgb), 0.22);
    font-size: 0.85rem;
    margin: 0.2rem;
}

#marketingAnalysisModal .marketing-highlight {
    background: linear-gradient(135deg, rgba(var(--success-rgb), 0.12), rgba(var(--primary-rgb), 0.08));
    border: 1px solid rgba(var(--success-rgb), 0.24);
    border-radius: 14px;
    padding: 1rem;
}

#marketingAnalysisModal .alert {
    border-radius: 14px;
    border: 1px solid rgba(var(--primary-rgb), 0.25);
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.12), rgba(var(--info-rgb), 0.08));
    color: var(--text-primary);
}

#marketingAnalysisModal .alert h6 {
    color: var(--text-primary);
}

body.dark-mode #marketingAnalysisModal .modal-content {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 22px 44px rgba(59, 55, 55, 0.7);
}

body.dark-mode #marketingAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.38), rgba(var(--success-rgb), 0.28)) !important;
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: var(--text-inverse) !important;
}

body.dark-mode #marketingAnalysisModal .modal-header .modal-title i {
    color: rgba(var(--success-rgb), 0.95);
}

body.dark-mode #marketingAnalysisModal .modal-body {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

body.dark-mode #marketingAnalysisModal .modal-footer {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
    border-top-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #marketingAnalysisModal .card {
    background: rgba(var(--surface-elevated-rgb, 54, 60, 73), 0.94);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 18px 32px rgba(59, 52, 52, 0.55);
}

body.dark-mode #marketingAnalysisModal .card-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.26), rgba(var(--success-rgb), 0.24)) !important;
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: rgba(226, 232, 240, 0.92) !important;
}

body.dark-mode #marketingAnalysisModal .card-header small {
    color: rgba(200, 213, 225, 0.82);
}

body.dark-mode #marketingAnalysisModal .card-body {
    background: rgba(var(--surface-elevated-rgb, 54, 60, 73), 0.92);
    color: rgba(226, 232, 240, 0.94);
}

body.dark-mode #marketingAnalysisModal .table {
    color: rgba(226, 232, 240, 0.94);
}

body.dark-mode #marketingAnalysisModal .table thead {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.32), rgba(var(--success-rgb), 0.22));
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #marketingAnalysisModal .table tbody tr:nth-of-type(odd) {
    background: rgba(var(--primary-rgb), 0.16);
}

body.dark-mode #marketingAnalysisModal .table tbody tr:nth-of-type(even) {
    background: rgba(var(--primary-rgb), 0.1);
}

body.dark-mode #marketingAnalysisModal .badge.bg-primary {
    background: rgba(var(--primary-rgb), 0.32) !important;
    color: rgba(226, 232, 240, 0.95) !important;
}

body.dark-mode #marketingAnalysisModal .badge.bg-success {
    background: rgba(var(--success-rgb), 0.32) !important;
    color: rgba(236, 253, 245, 0.95) !important;
}

body.dark-mode #marketingAnalysisModal .badge.bg-warning {
    background: rgba(var(--warning-rgb), 0.32) !important;
    color: rgba(255, 244, 199, 0.95) !important;
}

body.dark-mode #marketingAnalysisModal .badge.bg-info {
    background: rgba(var(--info-rgb), 0.34) !important;
    color: rgba(224, 242, 254, 0.95) !important;
}

body.dark-mode #marketingAnalysisModal .list-group {
    border-color: rgba(255, 255, 255, 0.1);
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.85);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
}

body.dark-mode #marketingAnalysisModal .list-group-item {
    border-color: rgba(255, 255, 255, 0.08);
    color: rgba(226, 232, 240, 0.92);
}

body.dark-mode #marketingAnalysisModal .list-group-item:hover,
body.dark-mode #marketingAnalysisModal .list-group-item:focus {
    background: rgba(var(--primary-rgb), 0.2);
    border-color: rgba(var(--primary-rgb), 0.45);
}

body.dark-mode #marketingAnalysisModal .form-control,
body.dark-mode #marketingAnalysisModal .form-select {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.8);
    border-color: rgba(255, 255, 255, 0.16);
    color: rgba(226, 232, 240, 0.94);
}

body.dark-mode #marketingAnalysisModal .form-control:focus,
body.dark-mode #marketingAnalysisModal .form-select:focus {
    border-color: rgba(var(--primary-rgb), 0.65);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.3);
}

body.dark-mode #marketingAnalysisModal .form-control::placeholder {
    color: rgba(148, 163, 184, 0.7);
}

body.dark-mode #marketingAnalysisModal .input-group-text {
    background: rgba(148, 163, 184, 0.18);
    border-color: rgba(255, 255, 255, 0.12);
    color: rgba(226, 232, 240, 0.88);
}

body.dark-mode #marketingAnalysisModal .btn-outline-dark {
    color: rgba(226, 232, 240, 0.9);
    border-color: rgba(255, 255, 255, 0.18);
}

body.dark-mode #marketingAnalysisModal .btn-outline-dark:hover,
body.dark-mode #marketingAnalysisModal .btn-outline-dark:focus {
    color: var(--text-inverse);
    background: rgba(var(--primary-rgb), 0.88);
    border-color: rgba(var(--primary-rgb), 0.95);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.32);
}

body.dark-mode #marketingAnalysisModal .hidden-section {
    border-color: rgba(var(--primary-rgb), 0.48);
    background: rgba(var(--primary-rgb), 0.18);
}

body.dark-mode #marketingAnalysisModal .hidden-section h6 {
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #marketingAnalysisModal .summary-tag {
    background: rgba(var(--primary-rgb), 0.22);
    color: rgba(226, 232, 240, 0.92);
    border-color: rgba(var(--primary-rgb), 0.42);
}

body.dark-mode #marketingAnalysisModal .marketing-highlight {
    background: linear-gradient(135deg, rgba(var(--success-rgb), 0.28), rgba(var(--primary-rgb), 0.24));
    border-color: rgba(var(--success-rgb), 0.34);
}

body.dark-mode #marketingAnalysisModal .alert {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.28), rgba(var(--success-rgb), 0.24));
    border-color: rgba(255, 255, 255, 0.12);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #marketingAnalysisModal .alert h6 {
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #marketingAnalysisModal .btn-primary {
    background: rgba(var(--primary-rgb), 0.88);
    border-color: rgba(var(--primary-rgb), 0.95);
    color: var(--text-inverse);
}

body.dark-mode #marketingAnalysisModal .btn-primary:hover,
body.dark-mode #marketingAnalysisModal .btn-primary:focus {
    background: rgba(var(--primary-rgb), 0.95);
    border-color: rgba(var(--primary-rgb), 1);
}

body.dark-mode #marketingAnalysisModal .btn-outline-primary,
body.dark-mode #marketingAnalysisModal .btn-secondary {
    color: rgba(226, 232, 240, 0.92);
    border-color: rgba(255, 255, 255, 0.2);
}

body.dark-mode #marketingAnalysisModal .btn-outline-primary:hover,
body.dark-mode #marketingAnalysisModal .btn-outline-primary:focus,
body.dark-mode #marketingAnalysisModal .btn-secondary:hover,
body.dark-mode #marketingAnalysisModal .btn-secondary:focus {
    color: var(--text-inverse);
    background: rgba(var(--primary-rgb), 0.85);
    border-color: rgba(var(--primary-rgb), 0.95);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.35);
}

body.dark-mode #categoricalNumericAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.34), rgba(var(--info-rgb), 0.24));
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: var(--text-primary);
}

body.dark-mode #categoricalNumericAnalysisModal .modal-header .modal-title i {
    color: rgba(var(--info-rgb), 0.9);
}

body.dark-mode #categoricalNumericAnalysisModal .modal-body {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

body.dark-mode #categoricalNumericAnalysisModal .modal-footer {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
    border-top-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-recommendations {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.18), rgba(var(--info-rgb), 0.16));
    border-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-card {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.95);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 18px 30px rgba(0, 0, 0, 0.45);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-card .card-header {
    background: rgba(var(--primary-rgb), 0.14);
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: rgba(226, 232, 240, 0.92);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-card .card-header i {
    color: rgba(var(--info-rgb), 0.82);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-card .card-body {
    background: rgba(var(--surface-elevated-rgb, 54, 60, 73), 0.95);
    color: var(--text-primary);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-list {
    background: rgba(var(--surface-elevated-rgb, 54, 60, 73), 0.95);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.6);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-list .list-group-item {
    border-color: rgba(255, 255, 255, 0.08);
    color: rgba(226, 232, 240, 0.92);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-list .list-group-item small {
    color: rgba(148, 163, 184, 0.9);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-list .list-group-item:hover {
    background: rgba(var(--primary-rgb), 0.22);
    border-color: rgba(var(--primary-rgb), 0.4);
}

body.dark-mode #categoricalNumericAnalysisModal #categoricalNumericRecommendationChips .recommendation-chip {
    background: rgba(59, 130, 246, 0.2);
    border-color: rgba(96, 165, 250, 0.46);
    color: rgba(191, 219, 254, 0.95);
}

body.dark-mode #categoricalNumericAnalysisModal #categoricalNumericRecommendationChips .recommendation-chip:hover,
body.dark-mode #categoricalNumericAnalysisModal #categoricalNumericRecommendationChips .recommendation-chip:focus,
body.dark-mode #categoricalNumericAnalysisModal #categoricalNumericRecommendationChips .recommendation-chip.active {
    background: rgba(96, 165, 250, 0.95);
    color: var(--text-inverse);
    box-shadow: 0 0 0 0.2rem rgba(96, 165, 250, 0.25);
}

body.dark-mode #categoricalNumericSelectionSummary {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.24), rgba(var(--info-rgb), 0.2));
    border-color: rgba(255, 255, 255, 0.08);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #categoricalNumericAnalysisModal .badge.bg-light-subtle {
    background: rgba(148, 163, 184, 0.24);
    color: rgba(226, 232, 240, 0.88);
    border: 1px solid rgba(148, 163, 184, 0.35);
}

body.dark-mode #categoricalNumericAnalysisModal .text-muted,
body.dark-mode #categoricalNumericAnalysisModal .text-muted small,
body.dark-mode #categoricalNumericAnalysisModal .text-muted span {
    color: rgba(200, 213, 225, 0.86) !important;
}

body.dark-mode #categoricalNumericAnalysisModal .input-group-text {
    background: rgba(148, 163, 184, 0.22);
    border-color: rgba(255, 255, 255, 0.14);
    color: rgba(226, 232, 240, 0.88);
}

body.dark-mode #categoricalNumericAnalysisModal .form-control {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.75);
    border-color: rgba(255, 255, 255, 0.14);
    color: rgba(226, 232, 240, 0.94);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.35);
}

body.dark-mode #categoricalNumericAnalysisModal .form-control::placeholder {
    color: rgba(148, 163, 184, 0.75);
}

body.dark-mode #categoricalNumericAnalysisModal .form-control:focus {
    border-color: rgba(96, 165, 250, 0.65);
    box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.25);
}

body.dark-mode #categoricalNumericAnalysisModal .btn-outline-secondary,
body.dark-mode #categoricalNumericAnalysisModal .btn-outline-primary,
body.dark-mode #categoricalNumericAnalysisModal .btn-outline-success {
    color: rgba(226, 232, 240, 0.92);
    border-color: rgba(255, 255, 255, 0.18);
}

body.dark-mode #categoricalNumericAnalysisModal .btn-outline-secondary:hover,
body.dark-mode #categoricalNumericAnalysisModal .btn-outline-primary:hover,
body.dark-mode #categoricalNumericAnalysisModal .btn-outline-success:hover,
body.dark-mode #categoricalNumericAnalysisModal .btn-outline-secondary:focus,
body.dark-mode #categoricalNumericAnalysisModal .btn-outline-primary:focus,
body.dark-mode #categoricalNumericAnalysisModal .btn-outline-success:focus {
    color: var(--text-inverse);
    background: rgba(59, 130, 246, 0.85);
    border-color: rgba(59, 130, 246, 0.95);
    box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.35);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-list .form-check-input {
    background-color: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.85);
    border-color: rgba(148, 163, 184, 0.6);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-list .form-check-input:checked {
    background-color: rgba(96, 165, 250, 0.95);
    border-color: rgba(147, 197, 253, 0.9);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-list .badge {
    background: rgba(96, 165, 250, 0.22);
    color: rgba(191, 219, 254, 0.94);
}

body.dark-mode #categoricalNumericAnalysisModal .categorical-numeric-toolbar .text-muted {
    color: rgba(200, 213, 225, 0.72) !important;
}

body.dark-mode #categoricalNumericAnalysisModal .modal-header .btn-close {
    filter: invert(1) hue-rotate(180deg);
    opacity: 0.85;
}

body.dark-mode #categoricalNumericAnalysisModal .modal-header .btn-close:hover {
    opacity: 1;
}

/* Cross Tabulation Modal */
#crossTabAnalysisModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 16px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-xl);
}

#crossTabAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--secondary-rgb), 0.2), rgba(var(--info-rgb), 0.12));
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
    align-items: center;
}

#crossTabAnalysisModal .modal-header .modal-title {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-weight: 600;
}

#crossTabAnalysisModal .modal-header .modal-title i {
    color: rgba(var(--secondary-rgb), 0.75);
}

#crossTabAnalysisModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 1.5rem;
}

#crossTabAnalysisModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

#crossTabAnalysisModal .btn-group .btn {
    min-width: 8.5rem;
}

#crossTabAnalysisModal .list-group {
    border: 1px solid var(--border-color);
    border-radius: 12px;
    background: var(--bg-primary);
    max-height: 320px;
    overflow-y: auto;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.04);
}

#crossTabAnalysisModal .list-group-item {
    background: transparent;
    color: var(--text-primary);
    border-color: var(--border-color);
    transition: background-color 0.2s ease, border-color 0.2s ease;
}

#crossTabAnalysisModal .list-group-item strong {
    color: var(--text-primary);
}

#crossTabAnalysisModal .list-group-item small {
    color: var(--text-secondary);
}

#crossTabAnalysisModal .list-group-item:hover {
    background: rgba(var(--secondary-rgb), 0.08);
    border-color: rgba(var(--secondary-rgb), 0.35);
}

#crossTabAnalysisModal .badge.bg-light {
    background: rgba(var(--secondary-rgb), 0.15);
    color: rgba(var(--secondary-rgb), 0.85);
}

#crossTabSelectionSummary {
    border-radius: 12px;
    border: 1px solid rgba(var(--secondary-rgb), 0.22);
    background: linear-gradient(135deg, rgba(var(--secondary-rgb), 0.1), rgba(var(--info-rgb), 0.05));
    color: var(--text-primary);
}

body.dark-mode #crossTabAnalysisModal .modal-content {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0 22px 44px rgba(0, 0, 0, 0.65);
}

body.dark-mode #crossTabAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--secondary-rgb), 0.32), rgba(var(--info-rgb), 0.2));
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: var(--text-primary);
}

body.dark-mode #crossTabAnalysisModal .modal-header .modal-title i {
    color: rgba(var(--secondary-rgb), 0.85);
}

body.dark-mode #crossTabAnalysisModal .modal-body {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

body.dark-mode #crossTabAnalysisModal .modal-footer {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
    border-top-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #crossTabAnalysisModal .btn-group .btn {
    color: rgba(226, 232, 240, 0.92);
    border-color: rgba(255, 255, 255, 0.18);
}

body.dark-mode #crossTabAnalysisModal .btn-group .btn:hover,
body.dark-mode #crossTabAnalysisModal .btn-group .btn:focus {
    color: var(--text-inverse);
    background: rgba(var(--secondary-rgb), 0.9);
    border-color: rgba(var(--secondary-rgb), 1);
    box-shadow: 0 0 0 0.2rem rgba(var(--secondary-rgb), 0.35);
}

body.dark-mode #crossTabAnalysisModal .list-group {
    background: rgba(var(--surface-elevated-rgb, 54, 60, 73), 0.95);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.6);
}

body.dark-mode #crossTabAnalysisModal .list-group-item {
    border-color: rgba(255, 255, 255, 0.08);
    color: rgba(226, 232, 240, 0.92);
}

body.dark-mode #crossTabAnalysisModal .list-group-item small {
    color: rgba(148, 163, 184, 0.9);
}

body.dark-mode #crossTabAnalysisModal .list-group-item:hover {
    background: rgba(var(--secondary-rgb), 0.25);
    border-color: rgba(var(--secondary-rgb), 0.45);
}

body.dark-mode #crossTabAnalysisModal .badge.bg-light {
    background: rgba(148, 163, 184, 0.26);
    color: rgba(226, 232, 240, 0.9);
    border: 1px solid rgba(148, 163, 184, 0.4);
}

body.dark-mode #crossTabSelectionSummary {
    background: linear-gradient(135deg, rgba(var(--secondary-rgb), 0.2), rgba(var(--info-rgb), 0.18));
    border-color: rgba(255, 255, 255, 0.08);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode #categoricalColumnList {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.9);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.35);
}

body.dark-mode #categoricalColumnList .list-group-item {
    background: transparent;
    border-color: rgba(255, 255, 255, 0.06);
    color: var(--text-primary);
}

body.dark-mode #categoricalColumnList .list-group-item:hover {
    background: rgba(var(--info-rgb), 0.12);
    border-color: rgba(var(--info-rgb), 0.22);
}

body.dark-mode #categoricalColumnList .list-group-item small {
    color: rgba(226, 232, 240, 0.65);
}

body.dark-mode #categoricalSelectionSummary {
    background: linear-gradient(135deg, rgba(var(--info-rgb), 0.18), rgba(var(--info-rgb), 0.08));
    border-color: rgba(var(--info-rgb), 0.3);
    color: rgba(237, 242, 247, 0.95);
}

/* Time Series Analysis Modal */
#timeSeriesAnalysisModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 16px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-lg);
}

#timeSeriesAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.22), rgba(var(--primary-rgb), 0.1));
    border-bottom: 1px solid var(--border-color);
    align-items: center;
    color: var(--text-primary);
}

#timeSeriesAnalysisModal .modal-header .modal-title {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-weight: 600;
}

#timeSeriesAnalysisModal .modal-header .modal-title i {
    font-size: 1.25rem;
    color: rgba(var(--primary-rgb), 0.75);
}

#timeSeriesAnalysisModal .btn-close {
    opacity: 0.75;
}

#timeSeriesAnalysisModal .btn-close:hover {
    opacity: 1;
}

#timeSeriesAnalysisModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 1.5rem;
}

#timeSeriesAnalysisModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

#timeSeriesAnalysisModal .card {
    border: 1px solid var(--border-color);
    border-radius: 14px;
    background: var(--bg-secondary);
    box-shadow: var(--shadow-sm);
}

#timeSeriesAnalysisModal .card + .card {
    margin-top: 1.25rem;
}

#timeSeriesAnalysisModal .card-header,
#timeSeriesAnalysisModal .card .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.12), rgba(var(--primary-rgb), 0.04));
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
}

#timeSeriesAnalysisModal #timeSeriesNumericSection .card-header,
#timeSeriesAnalysisModal #timeSeriesNumericSection .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.18), rgba(var(--primary-rgb), 0.08));
}

#timeSeriesAnalysisModal .card-header strong,
#timeSeriesAnalysisModal .card-header span,
#timeSeriesAnalysisModal .card .modal-header strong,
#timeSeriesAnalysisModal .card .modal-header span {
    color: inherit;
}

#timeSeriesAnalysisModal .card-header i,
#timeSeriesAnalysisModal .card .modal-header i {
    font-size: 1.1rem;
}

#timeSeriesAnalysisModal .card-body {
    background: var(--bg-secondary);
    color: var(--text-primary);
    padding: 1.1rem;
}

#timeSeriesAnalysisModal .input-group-text {
    background: var(--bg-secondary);
    border-color: var(--border-color);
    color: var(--text-secondary);
}

#timeSeriesAnalysisModal .form-control {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
    box-shadow: none;
}

#timeSeriesAnalysisModal .btn-group .btn {
    border-radius: 999px;
    padding-inline: 0.85rem;
}

#timeSeriesAnalysisModal .list-group {
    border: 1px solid var(--border-color);
    border-radius: 12px;
    max-height: 320px;
    overflow-y: auto;
    background: var(--bg-primary);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.04);
}

#timeSeriesAnalysisModal .list-group .list-group-item {
    background: transparent;
    color: var(--text-primary);
    border-color: var(--border-color);
    transition: background-color 0.2s ease, border-color 0.2s ease;
}

#timeSeriesAnalysisModal #timeSeriesDatetimeList .list-group-item:hover {
    background: rgba(var(--primary-rgb), 0.08);
    border-color: rgba(var(--primary-rgb), 0.24);
}

#timeSeriesAnalysisModal #timeSeriesNumericList .list-group-item:hover {
    background: rgba(var(--primary-rgb), 0.08);
    border-color: rgba(var(--primary-rgb), 0.24);
}

#timeSeriesAnalysisModal .alert {
    border-radius: 12px;
    border: 1px solid rgba(var(--primary-rgb), 0.25);
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.1), rgba(var(--primary-rgb), 0.04));
    color: var(--text-primary);
}

#timeSeriesAnalysisModal #timeSeriesSelectionSummary {
    box-shadow: none;
}

body.dark-mode #timeSeriesAnalysisModal .modal-content {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 18px 36px rgba(0, 0, 0, 0.65);
}

.bg-gradient-text {
    background: linear-gradient(135deg, rgba(107, 70, 193, 0.85), rgba(49, 130, 206, 0.75));
    color: #fff;
}

/* Text Analysis Modal */
#textAnalysisModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 16px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-lg);
}

#textAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(128, 90, 213, 0.18), rgba(49, 130, 206, 0.08));
    border-bottom: 1px solid var(--border-color);
    align-items: center;
    color: var(--text-primary);
}

#textAnalysisModal .modal-header .modal-title {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-weight: 600;
}

#textAnalysisModal .modal-header .modal-title i {
    font-size: 1.25rem;
    color: rgba(128, 90, 213, 0.8);
}

#textAnalysisModal .btn-close {
    opacity: 0.75;
}

#textAnalysisModal .btn-close:hover {
    opacity: 1;
}

#textAnalysisModal .modal-body {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 1.5rem;
}

#textAnalysisModal .modal-footer {
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

#textAnalysisModal .text-analysis-modal {
    background: var(--bg-primary);
    border-radius: 16px;
}

#textAnalysisModal .text-modal-card {
    border: 1px solid var(--border-color);
    border-radius: 14px;
    background: var(--bg-secondary);
    box-shadow: var(--shadow-sm);
}

#textAnalysisModal .text-modal-card .modal-header {
    border-bottom: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 14px 14px 0 0;
}

#textAnalysisModal .card-body {
    background: var(--bg-secondary);
    color: var(--text-primary);
    padding: 1.1rem;
}

#textAnalysisModal .input-group-text {
    background: var(--bg-secondary);
    border-color: var(--border-color);
    color: var(--text-secondary);
}

#textAnalysisModal .form-control {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
    box-shadow: none;
}

#textAnalysisModal .btn-group .btn {
    border-radius: 999px;
    padding-inline: 0.85rem;
}

#textAnalysisModal .list-group {
    border: 1px solid var(--border-color);
    border-radius: 12px;
    max-height: 320px;
    overflow-y: auto;
    background: var(--bg-primary);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.04);
}

#textAnalysisModal .list-group .list-group-item {
    background: transparent;
    color: var(--text-primary);
    border-color: var(--border-color);
    transition: background-color 0.2s ease, border-color 0.2s ease;
}

#textAnalysisModal .list-group .list-group-item:hover {
    background: rgba(128, 90, 213, 0.08);
    border-color: rgba(128, 90, 213, 0.22);
}

#textAnalysisModal .alert {
    border-radius: 12px;
    border: 1px solid rgba(128, 90, 213, 0.28);
    background: linear-gradient(135deg, rgba(128, 90, 213, 0.12), rgba(49, 130, 206, 0.05));
    color: var(--text-primary);
}

body.dark-mode #textAnalysisModal .modal-content,
body.dark-mode #textAnalysisModal .text-analysis-modal {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 18px 36px rgba(0, 0, 0, 0.65);
}

body.dark-mode #textAnalysisModal .text-modal-card {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.85);
    border-color: rgba(255, 255, 255, 0.06);
    box-shadow: none;
}

body.dark-mode #textAnalysisModal .list-group {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.9);
    border-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #textAnalysisModal .list-group .list-group-item:hover {
    background: rgba(107, 70, 193, 0.18);
    border-color: rgba(107, 70, 193, 0.35);
}

body.dark-mode #textAnalysisModal .alert {
    background: linear-gradient(135deg, rgba(128, 90, 213, 0.22), rgba(49, 130, 206, 0.09));
    border-color: rgba(128, 90, 213, 0.38);
}

/* Network & Entity Network Modals */
#networkAnalysisModal .modal-content,
#entityNetworkAnalysisModal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: 16px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-lg);
}

#networkAnalysisModal .modal-header,
#entityNetworkAnalysisModal .modal-header {
    border-bottom: 1px solid var(--border-color);
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.06), rgba(var(--primary-rgb), 0.02));
    color: var(--text-primary);
}

#networkAnalysisModal .btn-close,
#entityNetworkAnalysisModal .btn-close {
    opacity: 0.75;
}

#networkAnalysisModal .btn-close:hover,
#entityNetworkAnalysisModal .btn-close:hover {
    opacity: 1;
}

#networkAnalysisModal .card,
#entityNetworkAnalysisModal .card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 14px;
    box-shadow: var(--shadow-sm);
}

#networkAnalysisModal .card-header,
#entityNetworkAnalysisModal .card-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.1), rgba(var(--primary-rgb), 0.04));
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
}

#networkAnalysisModal .input-group-text,
#entityNetworkAnalysisModal .input-group-text {
    background: var(--bg-secondary);
    border-color: var(--border-color);
    color: var(--text-secondary);
}

#networkAnalysisModal .form-control,
#entityNetworkAnalysisModal .form-control {
    background: var(--bg-primary);
    border-color: var(--border-color);
    color: var(--text-primary);
    box-shadow: none;
}

#networkAnalysisModal .list-group,
#entityNetworkAnalysisModal .list-group {
    border: 1px solid var(--border-color);
    border-radius: 12px;
    max-height: 320px;
    overflow-y: auto;
    background: var(--bg-primary);
}

#networkAnalysisModal .list-group-item,
#entityNetworkAnalysisModal .list-group-item {
    background: transparent;
    color: var(--text-primary);
    border-color: var(--border-color);
    transition: background-color 0.2s ease, border-color 0.2s ease;
}

#networkAnalysisModal .list-group-item:hover,
#entityNetworkAnalysisModal .list-group-item:hover {
    background: rgba(var(--primary-rgb), 0.1);
    border-color: rgba(var(--primary-rgb), 0.3);
}

#networkAnalysisModal .alert,
#entityNetworkAnalysisModal .alert {
    border-radius: 12px;
    border: 1px solid rgba(var(--primary-rgb), 0.25);
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.12), rgba(var(--primary-rgb), 0.05));
    color: var(--text-primary);
}

body.dark-mode #networkAnalysisModal .modal-content,
body.dark-mode #entityNetworkAnalysisModal .modal-content {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.96);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 18px 36px rgba(0, 0, 0, 0.65);
}

body.dark-mode #networkAnalysisModal .card,
body.dark-mode #entityNetworkAnalysisModal .card {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.9);
    border-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #networkAnalysisModal .card-header,
body.dark-mode #entityNetworkAnalysisModal .card-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.22), rgba(var(--primary-rgb), 0.12));
    border-bottom-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #networkAnalysisModal .list-group,
body.dark-mode #entityNetworkAnalysisModal .list-group {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.94);
    border-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #networkAnalysisModal .list-group-item,
body.dark-mode #entityNetworkAnalysisModal .list-group-item {
    color: var(--text-primary);
    border-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #networkAnalysisModal .list-group-item:hover,
body.dark-mode #entityNetworkAnalysisModal .list-group-item:hover {
    background: rgba(var(--primary-rgb), 0.22);
    border-color: rgba(var(--primary-rgb), 0.38);
}

body.dark-mode #networkAnalysisModal .alert,
body.dark-mode #entityNetworkAnalysisModal .alert {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.24), rgba(var(--primary-rgb), 0.1));
    border-color: rgba(var(--primary-rgb), 0.42);
    color: var(--text-primary);
}

body.dark-mode #timeSeriesAnalysisModal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.42), rgba(var(--primary-rgb), 0.26));
    border-bottom-color: rgba(255, 255, 255, 0.12);
    color: var(--text-primary);
}

body.dark-mode #timeSeriesAnalysisModal .modal-header .modal-title i {
    color: rgba(var(--primary-rgb), 0.75);
}

body.dark-mode #timeSeriesAnalysisModal .btn-close {
    filter: invert(1);
    opacity: 0.8;
}

body.dark-mode #timeSeriesAnalysisModal .btn-close:hover {
    opacity: 1;
}

body.dark-mode #timeSeriesAnalysisModal .modal-body {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

body.dark-mode #timeSeriesAnalysisModal .modal-footer {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
    border-top-color: rgba(255, 255, 255, 0.08);
}

body.dark-mode #timeSeriesAnalysisModal .card {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
    border-color: rgba(255, 255, 255, 0.1);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.45);
}

body.dark-mode #timeSeriesAnalysisModal .card-header,
body.dark-mode #timeSeriesAnalysisModal .card .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.28), rgba(var(--primary-rgb), 0.16));
    border-bottom-color: rgba(255, 255, 255, 0.14);
}

body.dark-mode #timeSeriesAnalysisModal #timeSeriesNumericSection .card-header,
body.dark-mode #timeSeriesAnalysisModal #timeSeriesNumericSection .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.34), rgba(var(--primary-rgb), 0.2));
}

body.dark-mode #timeSeriesAnalysisModal .card-body {
    background: transparent;
    color: var(--text-primary);
}

body.dark-mode #timeSeriesAnalysisModal .input-group-text {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.9);
    border-color: rgba(255, 255, 255, 0.1);
    color: rgba(226, 232, 240, 0.75);
}

body.dark-mode #timeSeriesAnalysisModal .form-control {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.7);
    border-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
}

body.dark-mode #timeSeriesAnalysisModal .list-group {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.9);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.35);
}

body.dark-mode #timeSeriesAnalysisModal .list-group .list-group-item {
    background: transparent;
    border-color: rgba(255, 255, 255, 0.06);
    color: var(--text-primary);
}

body.dark-mode #timeSeriesAnalysisModal #timeSeriesDatetimeList .list-group-item:hover {
    background: rgba(var(--primary-rgb), 0.14);
    border-color: rgba(var(--primary-rgb), 0.28);
}

body.dark-mode #timeSeriesAnalysisModal #timeSeriesNumericList .list-group-item:hover {
    background: rgba(var(--primary-rgb), 0.14);
    border-color: rgba(var(--primary-rgb), 0.28);
}

body.dark-mode #timeSeriesAnalysisModal .alert {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.2), rgba(var(--primary-rgb), 0.1));
    border-color: rgba(var(--primary-rgb), 0.35);
    color: rgba(237, 242, 247, 0.95);
}

body.dark-mode #domainRecommendationsModal .modal-footer {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.92);
    border-top-color: rgba(255, 255, 255, 0.07);
}

body.dark-mode #domainRecommendationsModal .btn-secondary {
    background: rgba(var(--primary-rgb), 0.18);
    border-color: rgba(var(--primary-rgb), 0.32);
    color: var(--text-primary);
}

body.dark-mode #domainRecommendationsModal .btn-secondary:hover,
body.dark-mode #domainRecommendationsModal .btn-secondary:focus {
    background: rgba(var(--primary-rgb), 0.28);
    border-color: rgba(var(--primary-rgb), 0.42);
}

body.dark-mode #domainRecommendationsModal .btn-close {
    filter: invert(1);
    opacity: 0.85;
}

body.dark-mode #domainRecommendationsModal .btn-close:hover {
    opacity: 1;
}

body.dark-mode #domainRecommendationsModal .spinner-border {
    border-color: rgba(var(--success-rgb), 0.28);
    border-top-color: rgba(var(--success-rgb), 0.95);
}

body.dark-mode .recommendation-card {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.12);
    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.45);
}

body.dark-mode .recommendation-card:hover {
    box-shadow: 0 14px 32px rgba(0, 0, 0, 0.55);
    border-color: rgba(var(--success-rgb), 0.55);
}

body.dark-mode .recommendation-card i {
    color: rgba(var(--success-rgb), 0.75);
}

body.dark-mode .recommendation-card p,
body.dark-mode .recommendation-card li,
body.dark-mode .recommendation-card span,
body.dark-mode .recommendation-card small {
    color: rgba(226, 232, 240, 0.75);
}

/* Column Insights Styles - Enhanced */

.column-item {
    transition: all 0.25s ease;
    background: var(--card-background, #fff);
    border-radius: 12px;
    border: 1px solid rgba(0, 0, 0, 0.04);
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 14px rgba(15, 23, 42, 0.08);
}

.column-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 24px rgba(15, 23, 42, 0.12);
}

.column-item:before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 4px;
    background: #dee2e6;
    transition: background-color 0.3s ease;
}

.column-item.column-item-warning:before {
    background: #ffc107;
}

.column-item.column-item-danger:before,
.column-item.column-item-error:before {
    background: #dc3545;
}

.column-item.column-item-info:before {
    background: #17a2b8;
}

.column-item.column-item-drop-preview {
    background: rgba(255, 193, 7, 0.12);
    border-style: dashed;
}

.column-item.column-item-drop-preview:before {
    background: #fd7e14;
}

.column-item.column-item-drop-preview .column-name {
    color: #fd7e14;
}

.column-item .form-check {
    margin-bottom: 0;
    padding-left: 8px; /* Account for left border */
}

.column-item .form-check-input {
    margin-top: 0.3rem;
    transform: scale(1.1);
}

.column-item .form-check-input:checked {
    background-color: #28a745;
    border-color: #28a745;
}

.column-item .form-check-input:checked ~ .form-check-label {
    color: var(--primary-color, #007bff);
}

.column-item .form-check-input:checked ~ .form-check-label .column-name {
    color: #28a745;
    font-weight: 600;
}

.column-card {
    height: 100%;
    display: flex;
    flex-direction: column;
    margin-bottom: 0 !important;
    padding: 0.15rem;
}

.column-card .form-check {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 0.35rem 0.35rem 0.5rem;
}

.column-card .form-check-label {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.column-card .form-check-label .column-card-header {
    gap: 0.5rem;
}

.column-card .form-check-label .flex-grow-1 {
    min-width: 0;
}

.column-name {
    font-size: 0.95rem;
    font-weight: 500;
    transition: color 0.3s ease;
}

.column-type {
    font-size: 0.75rem;
    line-height: 1.2;
    opacity: 0.8;
}

.column-stats {
    font-size: 0.75rem;
    line-height: 1.2;
}

.column-type-icon {
    font-size: 1.1rem;
    opacity: 0.8;
}

.column-status-icon {
    margin-left: 0.5rem;
    font-size: 1.1rem;
}

.column-card .column-status-icon {
    display: flex;
    align-items: flex-start;
    justify-content: center;
    flex-shrink: 0;
}

.column-item.column-item-dropped {
    opacity: 0.45;
    border-style: dashed;
    background: var(--bg-secondary);
    pointer-events: none;
}

.column-item.column-item-dropped .form-check-input {
    visibility: hidden;
}

.column-item.column-item-dropped .column-name {
    text-decoration: line-through;
    color: var(--text-secondary);
}

.column-item.column-item-preview:not(.column-item-dropped) {
    border-style: dashed;
}

.column-badge-dropped {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.65rem;
    border-radius: 999px;
    padding: 0.2rem 0.55rem;
    background: rgba(var(--danger-rgb), 0.12);
    color: var(--danger-color);
}

.column-badge-preview {
    display: inline-flex;
    align-items: center;
    font-size: 0.65rem;
    border-radius: 999px;
    padding: 0.2rem 0.55rem;
    background: rgba(var(--warning-rgb), 0.16);
    color: var(--warning-color);
}

/* Preprocessing modal */
.preprocessing-modal {
    border-radius: 18px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-lg);
}

.preprocessing-modal .modal-body {
    background: var(--bg-primary);
}

.preprocessing-modal .preprocessing-section {
    margin-bottom: 1.5rem;
}

.preprocessing-modal .section-title {
    font-size: 0.78rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-weight: 700;
    color: var(--text-secondary);
    margin-bottom: 0.75rem;
}

.preprocessing-modal .preprocessing-control {
    border: 1px solid var(--border-color);
    border-radius: 14px;
    background: var(--bg-secondary);
    padding: 0.9rem;
}

.preprocessing-modal .preprocessing-control + .preprocessing-control {
    margin-top: 0.75rem;
}

.preprocessing-modal small.text-muted {
    font-size: 0.7rem;
}

body.dark-mode .preprocessing-modal {
    background: var(--bg-secondary);
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 22px 44px rgba(0, 0, 0, 0.7);
}

body.dark-mode .preprocessing-modal .modal-header {
    background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.34), rgba(var(--info-rgb), 0.24));
    border-bottom-color: rgba(255, 255, 255, 0.08);
    color: var(--text-inverse);
}

body.dark-mode .preprocessing-modal .modal-body {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.95);
    color: rgba(226, 232, 240, 0.95);
}

body.dark-mode .preprocessing-modal .section-title {
    color: rgba(226, 232, 240, 0.85);
}

body.dark-mode .preprocessing-modal .preprocessing-control {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.88);
    border-color: rgba(255, 255, 255, 0.12);
    color: rgba(226, 232, 240, 0.9);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.45);
}

body.dark-mode .preprocessing-modal small.text-muted {
    color: rgba(200, 213, 225, 0.82) !important;
}

body.dark-mode .preprocessing-modal .form-control,
body.dark-mode .preprocessing-modal .form-select {
    background: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.85);
    border-color: rgba(255, 255, 255, 0.16);
    color: rgba(226, 232, 240, 0.94);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.45);
}

body.dark-mode .preprocessing-modal .form-control:focus,
body.dark-mode .preprocessing-modal .form-select:focus {
    border-color: rgba(var(--primary-rgb), 0.65);
    box-shadow: 0 0 0 0.2rem rgba(var(--primary-rgb), 0.28);
}

body.dark-mode .preprocessing-modal .input-group-text {
    background: rgba(148, 163, 184, 0.2);
    border-color: rgba(255, 255, 255, 0.12);
    color: rgba(226, 232, 240, 0.88);
}

body.dark-mode .preprocessing-modal .form-check-input {
    background-color: rgba(var(--surface-soft-rgb, 39, 45, 55), 0.9);
    border-color: rgba(148, 163, 184, 0.6);
}

body.dark-mode .preprocessing-modal .form-check-input:checked {
    background-color: rgba(var(--primary-rgb), 0.85);
    border-color: rgba(var(--primary-rgb), 0.95);
}

.preprocessing-preview-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.45rem;
}

.preprocessing-preview-pill {
    border-radius: 999px;
    padding: 0.3rem 0.65rem;
    font-size: 0.66rem;
    font-weight: 600;
}

.preprocessing-preview-pill.preview-plan {
    background: rgba(var(--warning-rgb), 0.16);
    color: var(--warning-color);
}

.preprocessing-preview-pill.preview-applied {
    background: rgba(var(--success-rgb), 0.18);
    color: var(--success-color);
}

/* Enhanced badge styles */
.badge {
    font-size: 0.65rem;
    padding: 0.25em 0.5em;
    border-radius: 12px;
    font-weight: 500;
}

.badge-light {
    background-color: #f8f9fa;
    color: #6c757d;
    border: 1px solid #dee2e6;
}

.badge-info {
    background-color: rgba(23, 162, 184, 0.1);
    color: #17a2b8;
    border: 1px solid rgba(23, 162, 184, 0.3);
}

.badge-warning {
    background-color: rgba(255, 193, 7, 0.1);
    color: #856404;
    border: 1px solid rgba(255, 193, 7, 0.3);
}

.badge-danger {
    background-color: rgba(220, 53, 69, 0.1);
    color: #721c24;
    border: 1px solid rgba(220, 53, 69, 0.3);
}

.badge-outline-warning {
    background-color: transparent;
    color: #856404;
    border: 1px solid #ffc107;
    font-size: 0.6rem;
}

/* Column item variants */
.column-item.border-warning {
    border-color: #ffc107  ;
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.03) 0%, rgba(255, 193, 7, 0.08) 100%);
}

.column-item.border-danger {
    border-color: #dc3545  ;
    background: linear-gradient(135deg, rgba(220, 53, 69, 0.03) 0%, rgba(220, 53, 69, 0.08) 100%);
}

.column-item.border-info {
    border-color: #17a2b8  ;
    background: linear-gradient(135deg, rgba(23, 162, 184, 0.03) 0%, rgba(23, 162, 184, 0.08) 100%);
}

/* Column selection controls */
#columnInsightsContent .btn-sm {
    padding: 0.25rem 0.75rem;
    font-size: 0.75rem;
    border-radius: 20px;
    transition: all 0.3s ease;
}

/* Loading spinner improvements */
.loading-spinner {
    width: 1.2rem;
    height: 1.2rem;
    border: 2px solid #f3f3f3;
    border-top: 2px solid #007bff;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    display: inline-block;
}

/* Inline style replacements for notebook tab */
.notebook-scroll-container {
    max-height: 400px;
    overflow-y: auto;
}

.notebook-empty-icon {
    opacity: 0.5;
}

.analysis-option-network {
    border: 2px solid red  ;
    background-color: #ffe6e6  ;
}

.analysis-option-entity {
    border: 2px solid blue  ;
    background-color: #e6f3ff  ;
}

.hidden-section {
    display: none;
}

/* ======= CUSTOM ANALYSIS TAB STYLES (MOVED FROM HTML) ======= */

/* Custom Analysis Container */
.custom-analysis-container {
    background: var(--bg-primary);
    min-height: auto;
    padding: 20px 22px;
    position: relative;
    overflow: visible;
}

.custom-analysis-header {
    display: grid;
    /* Make the primary (left) column smaller so the resources (right) column can be larger. */
    /* Reduced from 2.2fr to 1.3fr and increased the min for the resources column. */
    grid-template-columns: minmax(0, 0.9fr) minmax(320px, 1fr);
    gap: 1.25rem;
    background: var(--card-gradient);
    border-radius: 16px;
    padding: 1.4rem 1.5rem;
    box-shadow: var(--shadow-md);
    margin-bottom: 1.25rem;
    align-items: flex-start;
}

.custom-analysis-header__top {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1.25rem;
}

.custom-analysis-header__intro {
    display: flex;
    flex-direction: column;
    gap: 0.65rem;
    min-width: 0;
}

.custom-analysis-header__primary {
    display: flex;
    flex-direction: column;
    gap: 0.9rem;
}

.custom-analysis-eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-secondary);
}

.custom-analysis-title {
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
    line-height: 1.3;
}

.custom-analysis-subtitle {
    color: var(--text-secondary);
    max-width: 600px;
    margin: 0.15rem 0 0;
    font-size: 0.95rem;
}

.custom-analysis-dataset {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding: 0.75rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    background: var(--bg-secondary);
    min-width: 220px;
    box-shadow: var(--shadow-xs);
}

.dataset-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
}

.dataset-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.95rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.dataset-meta {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.custom-analysis-chip-group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.custom-analysis-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.45rem 0.75rem;
    border-radius: 999px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    font-size: 0.85rem;
    box-shadow: var(--shadow-xs);
}

.custom-analysis-chip i {
    color: var(--primary-color);
    font-size: 0.95rem;
}

.custom-analysis-header__meta {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.custom-analysis-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 0.45rem;
}

.custom-analysis-pill {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.35rem 0.7rem;
    border-radius: 999px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    font-size: 0.8rem;
    color: var(--text-secondary);
    box-shadow: var(--shadow-xs);
}

.custom-analysis-pill i {
    color: var(--primary-color);
}

.custom-analysis-monitor {
    border: 1px solid var(--border-color);
    border-radius: 14px;
    background: var(--bg-secondary);
    padding: 0.9rem 1rem;
    box-shadow: var(--shadow-sm);
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.custom-analysis-monitor__heading {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    color: var(--text-primary);
}

.custom-analysis-monitor__heading strong {
    font-size: 0.95rem;
}

.custom-analysis-monitor__heading small {
    display: block;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.custom-analysis-monitor .monitor-icon {
    width: 32px;
    height: 32px;
    border-radius: 10px;
    background: var(--hover-bg);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
}

.custom-rate-limit-widget {
    border: 1px dashed var(--border-color);
    border-radius: 10px;
    padding: 0.75rem;
    background: var(--bg-primary);
    font-size: 0.85rem;
}

.custom-analysis-shortcuts {
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;
    margin-top: 1rem;
}

.shortcut-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    padding: 0.35rem 0.6rem;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    font-size: 0.8rem;
    color: var(--text-secondary);
    box-shadow: var(--shadow-xs);
}

.shortcut-chip__keys {
    display: inline-flex;
    gap: 0.25rem;
    align-items: center;
}

.shortcut-chip__keys kbd {
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 0.15rem 0.35rem;
    font-size: 0.7rem;
    color: var(--text-primary);
    box-shadow: var(--shadow-xs);
}

.shortcut-chip__label {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.custom-analysis-meta-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    padding: 1rem 1.2rem;
    box-shadow: var(--shadow-sm);
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
}

body.dark-mode .custom-analysis-meta-card {
    background: var(--bg-tertiary);
}

.meta-card-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-muted);
}

.meta-card-value {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
}

.meta-card-subtext {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.meta-shortcuts {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.meta-shortcuts li {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.shortcut-key {
    display: inline-flex;
    gap: 0.25rem;
    align-items: center;
    background: var(--bg-secondary);
    border-radius: 8px;
    padding: 0.15rem 0.35rem;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-xs);
}

.shortcut-key kbd {
    font-size: 0.75rem;
    font-weight: 600;
    background: transparent;
    color: var(--text-primary);
    border: none;
    padding: 0;
}

@media (max-width: 992px) {
    .custom-analysis-header {
        grid-template-columns: 1fr;
    }

    .custom-analysis-header__meta {
        flex-direction: row;
        flex-wrap: wrap;
    }

    .custom-analysis-meta-card {
        flex: 1 1 260px;
    }
}

@media (max-width: 576px) {
    .custom-analysis-container {
        padding: 20px;
    }

    .custom-analysis-meta-card {
        flex: 1 1 100%;
    }

    .custom-analysis-chip {
        font-size: 0.8rem;
    }
}

/* Code Cell Styles */
.custom-code-cell {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    margin: 0;
    box-shadow: var(--shadow-sm);
    transition: all 0.3s ease;
    overflow: visible; /* Allow floating buttons to show outside */
    position: relative;
}

.custom-code-cell:hover {
    box-shadow: var(--shadow-md);
    border-color: var(--primary-color);
}

.code-cell-header {
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
    padding: 12px 15px;
    display: flex;
    justify-content: between;
    align-items: center;
}

.code-cell-title {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.9rem;
    margin: 0;
}

.code-cell-controls {
    display: flex;
    gap: 8px;
}

.code-cell-controls .btn {
    padding: 4px 8px;
    font-size: 0.75rem;
    border-radius: 6px;
}

/* Collapsible cell functionality */
.custom-code-cell.collapsed .code-editor-container {
    display: none;
}

.custom-code-cell.collapsed .code-output {
    display: none  ;
}

.custom-code-cell.collapsed {
    background: var(--bg-tertiary);
    opacity: 0.7;
}

/* Collapse/expand button styling */
.collapse-btn {
    transition: transform 0.3s ease;
}

.collapse-btn.collapsed {
    transform: rotate(-90deg);
}

/* Floating navigation buttons */
.cell-float-controls {
    position: absolute;
    left: -15px;
    bottom: 20px;
    display: flex;
    flex-direction: column;
    gap: 5px;
    z-index: 10;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.custom-code-cell:hover .cell-float-controls {
    opacity: 1;
}

.float-btn {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 2px solid var(--primary-color);
    background: var(--bg-primary);
    color: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-sm);
    font-size: 14px;
}

.float-btn:hover {
    background: var(--primary-color);
    color: var(--bg-primary);
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
}

.float-btn:active {
    transform: scale(0.95);
}

/* Responsive floating buttons for collapsed cells */
.cell-float-controls.collapsed .float-btn {
    width: 24px;
    height: 24px;
    font-size: 12px;
    border-width: 1px;
}

.cell-float-controls.collapsed {
    gap: 3px;
    left: -12px;
}

/* Word wrap button styling */
.word-wrap-btn.btn-info {
    background-color: var(--bs-info);
    border-color: var(--bs-info);
    color: white;
}

.word-wrap-btn.btn-outline-info:hover {
    background-color: var(--bs-info);
    border-color: var(--bs-info);
    color: white;
}

/* Remove auto-scroll behavior */
.custom-analysis-container,
.custom-analysis-container * {
    scroll-behavior: auto  ;
}

/* Ensure proper spacing without overlapping */
.custom-code-cells {
    display: flex;
    flex-direction: column;
    gap: 1.1rem;
    padding-left: 6px; /* Space for floating buttons */
}

.custom-markdown-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.custom-markdown-card__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
}

.custom-markdown-card__title {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-weight: 600;
    font-size: 0.95rem;
    color: var(--text-primary);
}

.custom-markdown-card__controls {
    display: inline-flex;
    gap: 0.35rem;
}

.custom-markdown-card__controls .btn {
    padding: 0.3rem 0.45rem;
    font-size: 0.75rem;
    border-radius: 6px;
}

.custom-markdown-card__body {
    padding: 0.9rem 1rem 1.1rem;
    background: var(--bg-secondary);
}

.markdown-note-editor {
    width: 100%;
    min-height: 120px;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 0.75rem 0.9rem;
    resize: vertical;
    font-family: 'Monaco', 'Consolas', 'Ubuntu Mono', monospace;
    font-size: 0.9rem;
    line-height: 1.5;
    color: var(--text-primary);
    background: var(--code-bg);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.04);
}

.markdown-note-editor::placeholder {
    color: var(--text-muted);
    opacity: 0.8;
}

.markdown-note-preview {
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 0.85rem 1rem;
    background: var(--bg-primary);
    font-size: 0.9rem;
    line-height: 1.55;
    color: var(--text-primary);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.02);
}

.markdown-note-preview h1,
.markdown-note-preview h2,
.markdown-note-preview h3 {
    font-weight: 600;
    color: var(--text-primary);
    margin-top: 0;
}

.markdown-note-preview p {
    margin-bottom: 0.6rem;
    color: var(--text-secondary);
}

.markdown-note-preview ul,
.markdown-note-preview ol {
    padding-left: 1.1rem;
    margin-bottom: 0.6rem;
}

.markdown-note-preview code {
    background: var(--hover-bg);
    border-radius: 6px;
    padding: 0.1rem 0.35rem;
}

.markdown-note-preview pre {
    background: var(--code-bg);
    border-radius: 8px;
    padding: 0.75rem;
    overflow-x: auto;
}

body.dark-mode .custom-analysis-monitor,
body.dark-mode .custom-analysis-pill,
body.dark-mode .custom-analysis-dataset,
body.dark-mode .custom-rate-limit-widget,
body.dark-mode .shortcut-chip,
body.dark-mode .custom-markdown-card,
body.dark-mode .custom-markdown-card__body {
    background: var(--bg-tertiary);
    border-color: var(--border-color);
}

body.dark-mode .custom-analysis-monitor .monitor-icon {
    background: rgba(var(--primary-rgb), 0.12);
}

body.dark-mode .markdown-note-editor {
    background: var(--code-bg);
    color: var(--code-text);
}

body.dark-mode .markdown-note-preview {
    background: var(--bg-secondary);
}

@media (max-width: 992px) {
    .custom-analysis-header__top {
        flex-direction: column;
        align-items: stretch;
    }

    .custom-analysis-dataset {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
    }
}

@media (max-width: 768px) {
    .custom-analysis-container {
        padding: 18px;
    }

    .custom-analysis-header {
        grid-template-columns: 1fr;
        padding: 1.2rem;
    }

    .custom-analysis-header__meta {
        flex-direction: row;
        flex-wrap: wrap;
        gap: 0.75rem;
    }

    .custom-analysis-monitor,
    .custom-analysis-dataset {
        flex: 1 1 250px;
    }
}

@media (max-width: 576px) {
    .custom-analysis-shortcuts {
        gap: 0.45rem;
    }

    .custom-markdown-card__header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.6rem;
    }

    .custom-markdown-card__controls {
        width: 100%;
        justify-content: flex-start;
        flex-wrap: wrap;
    }
}

/* Code Editor Area */
.code-editor-container {
    position: relative;
    min-height: 120px; /* Reduced from 200px */
}

.code-editor {
    border: none;
    border-radius: 0;
    resize: vertical;
    min-height: 120px; /* Reduced from 200px */
    max-height: 600px; /* Allow expansion up to 600px */
    font-family: 'Monaco', 'Consolas', 'Ubuntu Mono', monospace;
    font-size: 14px;
    line-height: 1.5;
    background: var(--code-bg);
    color: var(--code-text);
    transition: height 0.3s ease; /* Smooth height transition */
}

/* Auto-expand textarea */
.code-editor-textarea {
    width: 100%;
    min-height: 120px;
    max-height: 600px;
    border: none;
    outline: none;
    padding: 15px;
    font-family: 'Monaco', 'Consolas', 'Ubuntu Mono', monospace;
    font-size: 14px;
    line-height: 1.5;
    resize: none; /* Disable manual resize, use auto-expand */
    background: var(--code-bg);
    color: var(--code-text);
    overflow-y: auto;
}

/* CodeMirror Text Selection */
.CodeMirror-selected {
    background: #3390ff  ;
    color: white  ;
}

.CodeMirror-selectedtext {
    color: white  ;
}

.CodeMirror-focused .CodeMirror-selected {
    background: #0066cc  ;
}

/* Ensure CodeMirror editor and its scroll pane follow the current theme variables
   so switching between light/dark updates the background correctly. */
.CodeMirror {
    background: var(--code-bg);
    color: var(--code-text);
    border: 1px solid var(--code-border);
    border-radius: 8px;
}

.CodeMirror-scroll {
    /* CodeMirror often renders the large scrollable content area inside this element. */
    background-color: var(--code-bg);
    color: var(--code-text);
}

/* Stronger specificity for cases where CodeMirror themes apply inline backgrounds. */
body:not(.dark-mode) .CodeMirror-scroll,
body.dark-mode .CodeMirror-scroll {
    background-color: var(--code-bg) !important;
    color: var(--code-text) !important;
}

/* For regular textarea fallback */
.code-editor-textarea::selection {
    background: #3390ff;
    color: white;
}

/* Output Area */
.code-output {
    background: var(--code-output-bg);
    border-top: 1px solid var(--border-color);
    padding: 15px;
    max-height: 400px;
    overflow-y: auto;
    font-family: 'Monaco', 'Consolas', 'Ubuntu Mono', monospace;
    font-size: 13px;
    line-height: 1.4;
}

.code-output pre {
    margin: 0;
    white-space: pre-wrap;
    word-wrap: break-word;
    color: var(--code-output-text);
}

.code-output.success {
    border-left: 4px solid var(--success-color);
}

.code-output.error {
    border-left: 4px solid var(--danger-color);
    background: rgba(var(--danger-color-rgb), 0.05);
}

/* Plot and DataFrame containers */
.plot-container {
    text-align: center;
    padding: 10px;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-top: 10px;
}

.plot-container img {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
}

.dataframe-container {
    margin-top: 10px;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
}

.dataframe-container h6 {
    margin: 0;
    padding: 10px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
}

.dataframe-container .table-responsive {
    margin: 0;
    max-height: 400px;
    overflow-y: auto;
}

/* Execution Status */
.execution-status {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 500;
}

.execution-status.running {
    background: rgba(var(--warning-color-rgb), 0.1);
    color: var(--warning-color);
    border: 1px solid var(--warning-color);
}

.execution-status.success {
    background: rgba(var(--success-color-rgb), 0.1);
    color: var(--success-color);
    border: 1px solid var(--success-color);
}

.execution-status.error {
    background: rgba(var(--danger-color-rgb), 0.1);
    color: var(--danger-color);
    border: 1px solid var(--danger-color);
}

/* Examples Panel */
.list-group-item-action {
    padding: 12px;
    border: none;
    border-bottom: 1px solid var(--border-color);
    transition: all 0.3s ease;
}

.list-group-item-action:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
    transform: translateX(5px);
}

.list-group-item-action i {
    margin-right: 8px;
    font-size: 1.1rem;
}

/* Floating buttons and panels styles */
.custom-floating-buttons {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1050;
}

.custom-floating-button {
    width: 56px;
    height: 56px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-width: 2px;
}

.custom-floating-button.btn-outline-info {
    background: var(--bg-primary);
    color: var(--bs-info);
    border-color: var(--bs-info);
}

.custom-floating-button.btn-outline-info:hover,
.custom-floating-button.btn-outline-info:focus {
    background: var(--bs-info);
    color: var(--text-inverse);
}

.custom-floating-button[aria-pressed="true"] {
    box-shadow: var(--shadow-md);
}

body.dark-mode .custom-floating-button.btn-outline-info {
    background: var(--bg-secondary);
    color: var(--bs-info);
}

body.dark-mode .custom-floating-button.btn-outline-info:hover,
body.dark-mode .custom-floating-button.btn-outline-info:focus {
    color: var(--text-inverse);
}

/* Variables and Examples Panels */
.variables-panel, .examples-panel {
    position: fixed;
    background: var(--bg-primary);
    border-radius: 12px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    overflow: hidden;
}

body.dark-mode .variables-panel,
body.dark-mode .examples-panel {
    background: var(--bg-secondary);
    border-color: var(--border-color);
}

.variables-panel {
    top: 50%;
    right: -350px;
    width: 320px;
    max-height: 60vh;
    transition: right 0.3s ease;
    transform: translateY(-50%);
}

.variables-panel.show {
    right: 20px;
}

.examples-panel {
    top: 0;
    right: -420px;
    width: 400px;
    height: 100vh;
    border-left: 2px solid #007bff;
    transition: right 0.3s ease;
    display: flex;
    flex-direction: column;
}

.examples-panel.show {
    right: 0;
}

/* ======= RESPONSIVE ADJUSTMENTS ======= */

@media (max-width: 768px) {
    .analysis-option {
        background: var(--bg-primary);
        border-color: var(--border-color);
    }
    
    .card {
        box-shadow: var(--shadow-xs);
    }
    
    .notebook-cell {
        box-shadow: var(--shadow-xs);
    }
}

/* ======= DARK MODE SPECIFIC ENHANCEMENTS ======= */



/* ======= THEME TOGGLE BUTTON ======= */



/* ======= ANIMATION ENHANCEMENTS ======= */

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.fade-in {
    animation: fadeIn 0.3s ease-out;
}

.slide-in {
    animation: slideIn 0.3s ease-out;
}

/* ======= ENHANCED COMPONENT STYLING FOR COMPLETE THEME COVERAGE ======= */



/* ======= ACCESSIBILITY ENHANCEMENTS ======= */

@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms  ;
        animation-iteration-count: 1  ;
        transition-duration: 0.01ms  ;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --border-color: #000000;
        --text-primary: #000000;
    }
    
    body.dark-mode {
        --border-color: #ffffff;
        --text-primary: #ffffff;
    }
}

/* ========================================
   Custom Analysis Tab Styles (moved from HTML)
======================================== */

/* Main row styling */
.custom-analysis-main-row {
    min-height: 100vh;
}

/* Variables Panel Styles */
.variables-panel {
    position: fixed;
    top: 50%;
    right: -350px; /* Start hidden off-screen */
    width: 320px;
    max-height: 60vh;
    background: var(--bg-primary);
    border-radius: 12px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    transition: right 0.3s ease;
    transform: translateY(-50%);
    overflow: hidden;
}

.variables-panel.show {
    right: 20px; /* Slide in position */
}

.variables-panel-header {
    background: var(--bg-secondary);
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.variables-panel-close {
    background: none;
    border: none;
    font-size: 18px;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.2s;
}

.variables-panel-close:hover {
    background: var(--hover-bg);
    color: var(--primary-color);
}

.variables-panel-content {
    padding: 16px;
    max-height: calc(60vh - 60px);
    overflow-y: auto;
    background: var(--bg-primary);
}

.variables-category {
    margin-bottom: 20px;
}

.variables-category h6 {
    color: var(--text-secondary);
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
    padding-bottom: 4px;
    border-bottom: 1px solid var(--border-color);
}

.variable-item {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    padding: 8px 12px;
    margin-bottom: 6px;
    font-family: 'Monaco', 'Consolas', 'Ubuntu Mono', monospace;
    font-size: 13px;
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.2s;
}

.variable-item:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
    color: var(--primary-color);
}

.variable-item.clickable:active {
    transform: scale(0.98);
}

.variables-panel-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.1);
    z-index: 999;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.variables-panel-overlay.show {
    opacity: 1;
    visibility: visible;
}

body.dark-mode .variables-panel-header {
    background: var(--bg-tertiary);
}

body.dark-mode .variables-panel-content {
    background: var(--bg-secondary);
}

body.dark-mode .variable-item {
    background: var(--bg-tertiary);
}

body.dark-mode .variable-item:hover {
    background: rgba(var(--primary-rgb), 0.15);
}

/* Examples Panel Styles */
.examples-panel {
    position: fixed;
    top: 0;
    right: -420px; /* Start hidden off-screen */
    width: 400px;
    height: 100vh;
    background: var(--bg-primary);
    border-left: 1px solid var(--border-color);
    box-shadow: -6px 0 18px rgba(0,0,0,0.12);
    z-index: 1055;
    transition: right 0.3s ease;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.examples-panel.show {
    right: 0; /* Slide in position */
}

.examples-panel-header {
    background: var(--primary-gradient);
    color: var(--text-inverse);
    padding: 16px 20px;
    font-weight: 600;
    font-size: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(var(--primary-rgb), 0.35);
}

.examples-panel-close {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--text-inverse);
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.2s;
}

.examples-panel-close:hover {
    background: rgba(255, 255, 255, 0.2);
}

.examples-panel-content {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    background: var(--bg-primary);
}

.examples-panel-content h6 {
    color: var(--text-primary);
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 12px;
    padding-bottom: 4px;
    border-bottom: 1px solid var(--border-color);
}

.example-item {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 12px 16px;
    margin-bottom: 8px;
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.2s;
    font-size: 14px;
    display: flex;
    align-items: center;
}

.example-item:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
    color: var(--primary-color);
    transform: translateX(5px);
}

.example-item:active {
    transform: translateX(2px) scale(0.98);
}

body.dark-mode .examples-panel-content {
    background: var(--bg-secondary);
}

body.dark-mode .examples-panel-header {
    border-bottom-color: rgba(var(--primary-rgb), 0.45);
}

body.dark-mode .example-item {
    background: var(--bg-tertiary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

body.dark-mode .example-item:hover {
    background: rgba(var(--primary-rgb), 0.15);
}

.examples-panel-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.1);
    z-index: 1054;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.examples-panel-overlay.show {
    opacity: 1;
    visibility: visible;
}

/* Floating buttons styles */
.floating-buttons button {
    transition: all 0.3s ease;
}

.floating-buttons button:hover {
    transform: scale(1.1);
}

.floating-buttons button:active {
    transform: scale(0.95);
}

/* ========================================
   EDA Main Template Styles (moved from HTML)
======================================== */

/* Main EDA Container */
.eda-container {
    min-height: 100vh;
    background: var(--page-gradient);
    padding: 0;
}

.eda-shell {
    width: 100%;
    max-width: none;
    margin: 0;
    background: var(--bg-primary);
    border-radius: 0;
    box-shadow: none;
    min-height: 100vh;
    padding: clamp(1.25rem, 2vw, 2rem) clamp(1.5rem, 3vw, 3rem) clamp(2rem, 3vw, 3.25rem);
    display: flex;
    flex-direction: column;
    gap: clamp(1.1rem, 2vw, 1.9rem);
}

body.dark-mode .eda-shell {
    background: var(--bg-secondary);
}

.eda-hero {
    display: grid;
    grid-template-columns: minmax(0, 1fr);
    gap: clamp(1rem, 1.75vw, 2rem);
    background: var(--card-gradient);
    border-radius: clamp(14px, 2vw, 22px);
    padding: clamp(1rem, 1.85vw, 2.25rem);
    box-shadow: var(--shadow-sm);
}

body.dark-mode .eda-hero {
    background: rgba(255, 255, 255, 0.02);
}

.eda-hero__content {
    display: flex;
    flex-direction: column;
    gap: clamp(0.65rem, 1vw, 1.1rem);
}

.eda-hero__domain {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 0.4rem;
    min-width: clamp(180px, 18vw, 220px);
}

.eda-hero__domain .domain-compact {
    margin: 0;
}

.eda-hero__domain-label {
    font-size: 0.75rem;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    font-weight: 600;
}

.eda-hero__domain .domain-compact-button {
    width: 100%;
    justify-content: center;
}

.eda-hero__domain-hint {
    font-size: 0.7rem;
    color: var(--text-tertiary, rgba(24, 39, 53, 0.6));
}

body.dark-mode .eda-hero__domain-hint {
    color: rgba(255, 255, 255, 0.55);
}

.eda-hero__eyebrow {
    text-transform: uppercase;
    letter-spacing: 0.18em;
    font-size: 0.75rem;
    color: var(--text-secondary);
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    font-weight: 600;
}

.eda-hero__title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    flex-wrap: wrap;
}

.eda-hero__title {
    margin: 0;
    font-size: clamp(1.65rem, 2.6vw, 2.2rem);
    font-weight: 700;
    color: var(--text-primary);
}

.eda-hero__actions {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.eda-hero__subtitle {
    margin: 0;
    font-size: 0.95rem;
    color: var(--text-secondary);
    max-width: 560px;
}

.eda-hero__icon-btn {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    border: 1px solid transparent;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    background: var(--bg-secondary);
    box-shadow: var(--shadow-sm);
    transition: transform 0.2s ease, box-shadow 0.2s ease, color 0.2s ease;
}

.eda-hero__icon-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    color: var(--text-primary);
}

.eda-hero__icon-btn:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.eda-hero__primary-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    border: none;
    border-radius: 999px;
    padding: 0.65rem 1.4rem;
    font-weight: 600;
    color: var(--text-inverse);
    background: var(--btn-eda-gradient);
    box-shadow: 0 12px 32px rgba(var(--primary-rgb), 0.28);
    transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.eda-hero__primary-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 16px 36px rgba(var(--primary-rgb), 0.35);
    background: var(--btn-eda-hover-gradient);
}

.eda-hero__primary-btn:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.eda-hero__primary-btn i {
    font-size: 1.1rem;
}

@media (max-width: 992px) {
    .eda-shell {
        padding: clamp(1.25rem, 4vw, 2rem);
    }

    .eda-hero {
        grid-template-columns: 1fr;
    }

    .eda-hero__actions {
        width: 100%;
        justify-content: flex-start;
    }

    .eda-hero__domain {
        width: 100%;
        min-width: 0;
    }

    .eda-hero__domain .domain-compact-button {
        width: auto;
    }
}

@media (max-width: 576px) {
    .eda-container {
        padding: 1rem;
    }

    .eda-shell {
        padding: 1.25rem;
    }

    .eda-hero {
        padding: 1.25rem;
    }
}

.eda-tab-nav {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    padding: 0.65rem;
    border-radius: 18px;
    background: var(--bg-secondary);
    box-shadow: var(--shadow-sm);
}

body.dark-mode .eda-tab-nav {
    background: rgba(255, 255, 255, 0.05);
}

.eda-tab-button {
    border: none;
    background: transparent;
    color: var(--text-secondary);
    font-weight: 600;
    padding: 0.65rem 1.15rem;
    border-radius: 12px;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    transition: background-color 0.25s ease, color 0.25s ease, transform 0.25s ease;
}

.eda-tab-button i {
    font-size: 1rem;
}

.eda-tab-button.active {
    background: var(--primary-gradient);
    color: var(--text-inverse);
    box-shadow: var(--shadow-sm);
    transform: translateY(-1px);
}

.eda-tab-button:not(.active):hover {
    background: rgba(var(--primary-rgb), 0.08);
    color: var(--text-primary);
}

.eda-tab-button:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.eda-tab-panels {
    flex: 1;
}

.eda-tab-panels .tab-content {
    background: var(--bg-primary);
    border-radius: 24px;
    box-shadow: var(--shadow-md);
    overflow: hidden;
}

body.dark-mode .eda-tab-panels .tab-content {
    background: rgba(255, 255, 255, 0.04);
}

.eda-tab-panels .tab-pane {
    padding: clamp(1.25rem, 1.9vw, 2.1rem);
}

.eda-tab-panels .tab-pane[data-preview-tab] {
    padding: clamp(0.65rem, 1.1vw, 1.05rem);
}

/* Floating Controls */
.floating-controls {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
}

.control-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: none;
    margin: 5px;
    box-shadow: var(--shadow-md);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.control-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.export-btn { background: var(--export-gradient); color: var(--text-inverse); }
.help-btn { background: var(--help-gradient); color: var(--text-primary); }
.settings-btn { background: var(--features-gradient); color: var(--text-primary); }

/* Custom Analysis Tab - Additional Styles */
.custom-rate-limit-widget {
    min-height: 120px;
    border: 1px solid #007bff;
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
}

/* Custom Floating Buttons */
.custom-floating-buttons {
    bottom: 20px;
    right: 20px;
    z-index: 1050;
}

.custom-floating-button {
    width: 56px;
    height: 56px;
}

/* ========================================
   Additional Button Styles from Data Preview/Ingestion
======================================== */

/* EDA CTA Button Styles */
.btn-eda-hero {
    border: none;
    border-radius: 16px;
    padding: 1.5rem 2.5rem;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
    display: inline-block;
    flex: 1;
    min-width: 280px;
    max-width: 350px;
}

.btn-eda-hero {
    background: var(--btn-eda-gradient);
    color: white;
    box-shadow: 0 8px 32px rgba(66, 153, 225, 0.3);
}

.btn-eda-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s ease;
}

.btn-eda-hero:hover::before {
    left: 100%;
}

.btn-eda-hero:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 12px 40px rgba(66, 153, 225, 0.4);
    background: var(--btn-eda-hover-gradient);
}

.btn-eda-hero:active {
    transform: translateY(-1px) scale(1);
}

/* Button content styling */
.eda-button-content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.2rem;
}

.eda-icon {
    font-size: 1.8rem;
    color: rgba(255, 255, 255, 0.9);
}

.eda-text-content {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    line-height: 1.2;
}

.eda-main-text {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 0.2rem;
}

.eda-sub-text {
    font-size: 0.85rem;
    opacity: 0.9;
    font-weight: 400;
}

.eda-arrow {
    font-size: 1.5rem;
    transition: transform 0.4s ease;
    color: rgba(255, 255, 255, 0.8);
}

.btn-eda-hero:hover .eda-arrow {
    transform: translateX(8px);
}

/* Dark mode button adjustments */
body.dark-mode .btn-eda-hero {
    background: var(--btn-eda-gradient);
    box-shadow: 0 8px 32px rgba(99, 179, 237, 0.3);
}

body.dark-mode .btn-eda-hero:hover {
    background: var(--btn-eda-hover-gradient);
    box-shadow: 0 12px 40px rgba(99, 179, 237, 0.4);
}

/* ========================================
   Theme Toggle Styles
======================================== */

.theme-toggle-nav {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: var(--primary-gradient);
    color: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-sm);
}

.theme-toggle-nav:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-md);
}

/* ========================================
   Modern Navigation (for consistency)
======================================== */

.modern-nav {
    background: rgba(255, 255, 255, 0.95);
    box-shadow: var(--shadow-md);
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(10px);
}

body.dark-mode .modern-nav {
    background: rgba(var(--surface-base-rgb, 47, 53, 64), 0.95);
}

.nav-container {
    width: 100%;
    margin: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem clamp(1.5rem, 3vw, 3.25rem);
}

.nav-links {
    display: flex;
    gap: 1rem;
    align-items: center;
}

.nav-actions {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.nav-link {
    padding: 0.5rem 1rem;
    border-radius: 8px;
    color: var(--text-secondary);
    text-decoration: none;
    transition: all 0.3s ease;
    font-weight: 500;
}

.nav-link:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
    transform: translateY(-2px);
}

.nav-link.active {
    background: var(--primary-gradient);
    color: white;
}

.custom-analysis-status {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1.25rem;
    margin-bottom: 1.5rem;
}

.custom-analysis-status-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    padding: 1.25rem;
    box-shadow: var(--shadow-sm);
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.custom-analysis-status-card--monitor {
    backdrop-filter: blur(6px);
}

.status-card-head {
    display: flex;
    align-items: center;
    gap: 0.85rem;
}

.status-card-icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    background: var(--primary-gradient);
    color: var(--text-inverse);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    box-shadow: var(--shadow-sm);
}

.status-card-eyebrow {
    display: block;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-muted);
    margin-bottom: 0.1rem;
}

.status-card-title {
    margin: 0;
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--text-primary);
}

.status-card-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 0.65rem;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.status-card-list li {
    display: flex;
    gap: 0.6rem;
    align-items: flex-start;
}

.status-card-list i {
    color: var(--primary-color);
    font-size: 1rem;
    line-height: 1.2;
}

@media (max-width: 768px) {
    .custom-analysis-status {
        grid-template-columns: 1fr;
    }
}

.custom-analysis-toolbar {
    position: sticky;
    top: 72px;
    z-index: 15;
    display: flex;
    flex-wrap: wrap;
    gap: 0.65rem;
    justify-content: space-between;
    align-items: center;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 14px;
    padding: 0.75rem 1rem;
    box-shadow: var(--shadow-sm);
    margin-bottom: 1.2rem;
}

.custom-analysis-toolbar__group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.custom-analysis-toolbar__group--secondary {
    justify-content: flex-end;
}

.custom-toolbar-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.45rem 0.85rem;
    font-weight: 600;
    font-size: 0.88rem;
    line-height: 1.1;
}

@media (max-width: 768px) {
    .custom-analysis-toolbar {
        position: static;
        flex-direction: column;
        align-items: stretch;
    }

    .custom-analysis-toolbar__group {
        width: 100%;
        justify-content: center;
    }
}

.custom-analysis-empty {
    border: 1px dashed var(--border-color);
    border-radius: 16px;
    padding: 2rem;
    background: var(--bg-secondary);
    text-align: center;
    color: var(--text-secondary);
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.02);
}

.custom-analysis-empty__illustration {
    width: 72px;
    height: 72px;
    border-radius: 16px;
    margin: 0 auto 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-sm);
}

.custom-analysis-empty__illustration i {
    font-size: 2rem;
    color: var(--primary-color);
}

.custom-analysis-empty h5 {
    font-size: 1.1rem;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.custom-analysis-empty__actions {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 1.25rem;
}